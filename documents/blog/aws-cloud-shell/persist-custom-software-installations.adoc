---
layout: documents
title: AWS CloudShell - Persisting Custom Software Installations
summary: "AWS CloudShell is a powerful browser-based terminal pre-configured for managing AWS resources. But by default, tools you install like helm and yq don‚Äôt persist between sessions, which can be frustrating.

This article walks through how to take advantage of the 1GB of persistent storage in your $HOME directory to make your tools stick. You‚Äôll learn how to install helm and yq into $HOME/bin, update your PATH correctly, and verify installations even after restarting the shell. It also provides a fallback setup script if you‚Äôd rather re-install tools automatically at session start.

Perfect for AWS users, DevOps engineers, and Kubernetes practitioners who need a consistent, ready-to-go terminal every time they log in."
tags: "#AWSCloudShell #DevOps #Helm #Kubernetes #AWS #CloudComputing #CLI #Automation #InfrastructureAsCode #CloudNative #PersistentStorage #yq #TechTips #DeveloperTools"
author: Young Gyu Kim
email: credemol@gmail.com
breadcrumb:
  - name: Home
    url: /
  - name: Docs
    url: /documents/
  - name: Blog
    url: /documents/blog/
---


= AWS CloudShell - Persisting Custom Software Installations

:imagesdir: images

[.img-wide]
image::persist-custom-software-installations.png[]


== Overview

YouTube Video Tutorial: https://youtu.be/v1DakpaVWSE

In a previous article, we walked through setting up AWS CloudShell for deploying *Service Foundry*. As you begin using CloudShell for real work, one key challenge you‚Äôll encounter is how to retain custom-installed tools across sessions.

For example, if you install tools like helm or yq into /usr/local/bin, they‚Äôll work fine‚Äîuntil your session ends. Once the session closes or times out, those binaries are wiped out. This is because that location resides on *ephemeral storage*, which does not persist between sessions.

To solve this, AWS CloudShell provides *1 GB of persistent storage* located in your home directory ($HOME). This space is yours, private, and retained across sessions and even system restarts.

This guide shows how to leverage that persistent space to install helm, yq, or any custom tools so they remain available every time you log in to CloudShell.


=== Using Persistent Storage in AWS CloudShell

AWS CloudShell gives every user *1 GB of persistent storage per region*‚Äîand the best part is, it‚Äôs free. This persistent storage is located in your home directory ($HOME), and anything you store there remains intact between sessions. In contrast, most other parts of the CloudShell environment are reset whenever you disconnect.

You can read more about this in the official AWS documentation:
link:https://docs.aws.amazon.com/cloudshell/latest/userguide/limits.html#persistent-storage-limitations[AWS CloudShell Persistent Storage].


== Add $HOME/bin to PATH

To make custom-installed tools accessible from the command line, you should store them in a dedicated folder like ~/bin and ensure it‚Äôs part of your PATH.

CloudShell usually includes $HOME/bin in the PATH by default. But if for any reason it isn‚Äôt, follow these steps:

.Check if $HOME/bin is already in your PATH:
[source,shell]
----
$ echo $PATH
----

.If it‚Äôs not included, add it manually:
[source,shell]
----
$ echo 'export PATH=$HOME/bin:$PATH' >> $HOME/.bashrc
$ source $HOME/.bashrc
----

.Then, create the directory (if it doesn‚Äôt already exist):
[source,shell]
----
$ mkdir -p $HOME/bin
----

== Installing Custom Tools in Persistent Storage

Now let‚Äôs install two essential CLI tools‚ÄîHelm and yq‚Äîinto your persistent $HOME/bin directory so they survive restarts and session expirations.


=== Install Helm

Run the following commands to download and move Helm into your persistent bin directory:

[source,shell]
----
$ curl -L https://get.helm.sh/helm-v3.14.2-linux-amd64.tar.gz -o helm.tar.gz
$ tar -zxvf helm.tar.gz
$ mv linux-amd64/helm ~/bin/
$ rm -rf helm.tar.gz linux-amd64
----

Verify installation:
[source,shell]
----
$ helm version
----

=== Installing yq

Next, download the latest yq binary and make it executable:

[source,shell]
----
$ wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O ~/bin/yq
chmod +x ~/bin/yq
----

Verify installation:
[source,shell]
----
$ yq --version
----

== Restart CloudShell to Finalize Setup

To confirm that everything works as expected, restart your CloudShell session.

Click the gear icon in the top-right of the CloudShell window and choose *‚ÄúRestart‚Äù*.

Then, once the terminal restarts, run:

[source,shell]
----
$ helm version
$ yq --version
----

If you see valid output, congratulations‚Äîyour tools are now installed persistently!

== Optional: Create a Setup Script for Ephemeral Use

If you don‚Äôt want to store software permanently or want a reproducible way to set up tools every time, you can create a script like this one:

[source,shell]
----
$ cat << 'EOF' > $HOME/setup-cloudshell.sh

#!/bin/bash

# Install Helm
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash

# Install yq
wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 -O ./yq
chmod +x ./yq
sudo mv ./yq /usr/local/bin/yq

# Install any other tools you need here

EOF
----

Make the script executable:
[source,shell]
----
$ chmod +x $HOME/setup-cloudshell.sh
----

Then run this script anytime you launch a fresh session:
[source,shell]
----
$ $HOME/setup-cloudshell.sh
----



== Conclusion

Installing custom tools like Helm and yq in ephemeral paths like /usr/local/bin works only temporarily on AWS CloudShell. Instead, using the *persistent $HOME/bin directory* ensures those tools stick around for your next session.

With just a little configuration, you can make your CloudShell environment feel permanent and productive.

üìò View the web version:

* https://nsalexamy.github.io/service-foundry/pages/documents/blog/aws-clood-shell/persist-custom-software-installations.html




{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +
{empty} +


[.img-wide]
image::thnak-you-for-watching.png[]

{empty} +
{empty} +
{empty} +
