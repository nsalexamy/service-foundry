<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Implementing End-to-End Observability in React Applications with OpenTelemetry</title>
    <!-- rouge source highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
<!--    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">-->
    <link rel="stylesheet" href="/service-foundry/pages/assets/css/main.css">

    <!-- Highlight.js script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</head>
<body class="">

<!-- Header -->
<header>
<!--    <div class="logo text-xl font-semibold">Service Foundry</div>-->
    <a href="/service-foundry/pages/index.html" class="text-2xl font-semibold hover:text-teal-400">Service Foundry</a>
    <nav>
    
        
        <a href="/service-foundry/pages/getting-started/" class="">Getting Started</a>
    
        
        <a href="/service-foundry/pages/documents/" class="active">Docs</a>
    
        
        <a href="/service-foundry/pages/github/" class="">GitHub</a>
    
        
        <a href="/service-foundry/pages/developers/" class="">Developers</a>
    
        
        <a href="/service-foundry/pages/demo/" class="">Demo</a>
    
</nav>
</header>


    <!-- Sub-navigation for Foundries -->
    <div class="subnav">

    
    <a href="/service-foundry/pages/documents/blog/" class="">Blog</a>

    
    <a href="/service-foundry/pages/documents/infra-foundry/" class="">Infra</a>

    
    <a href="/service-foundry/pages/documents/sso-foundry/" class="">SSO</a>

    
    <a href="/service-foundry/pages/documents/o11y-foundry/" class="active">Observability</a>

    
    <a href="/service-foundry/pages/documents/backend-foundry/" class="">Backend</a>

    
    <a href="/service-foundry/pages/documents/bigdata-foundry/" class="">Big Data</a>

<!--    <a href="/service-foundry/pages/documents/infra-foundry/index-backup.html" class="text-gray-300 hover:text-white">Infra</a>-->
<!--    <a href="/service-foundry/pages/documents/sso-foundry/index-backup.html" class="text-gray-300 hover:text-white">SSO</a>-->
<!--    <a href="/service-foundry/pages/documents/o11y-foundry/index-backup.html" class="text-gray-300 hover:text-white">Observability</a>-->
<!--    <a href="/service-foundry/pages/documents/backend-foundry/index-backup.html" class="text-gray-300 hover:text-white">Backend</a>-->
<!--    <a href="/service-foundry/pages/documents/bigdata-foundry/index-backup.html" class="text-gray-300 hover:text-white">Big Data</a>-->
</div>





<!-- Breadcrumb -->

    <nav class="breadcrumb-wrapper">
    <ol class="breadcrumb">
        
        <li>
            
            <a href="/service-foundry/pages/">Home</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/">Docs</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/o11y-foundry/">Observability Foundry</a>
            
            
        </li>
        
    </ol>
</nav>





<!-- Main Layout -->
<div class="container">


    <nav id="toc-container" class="toc-nav"></nav>


    <main id="main-content">
        
        <div class="author-box">
            Young Gyu Kim
            &lt;<a href="mailto:credemol@gmail.com" style="color: #0d9488; text-decoration: none;">credemol@gmail.com</a>&gt;
        </div>
        

        <!-- Title -->
        
        <h1 class="page-title">
            Implementing End-to-End Observability in React Applications with OpenTelemetry
        </h1>
        

        <div class="asciidoc">
            <div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#opentelemetry-language-sdk-status">OpenTelemetry Language SDK Status</a></li>
</ul>
</li>
<li><a href="#part-1-setting-up-the-react-application">Part 1: Setting Up the React Application</a>
<ul class="sectlevel2">
<li><a href="#step-1-bootstrap-the-react-project">Step 1: Bootstrap the React Project</a></li>
<li><a href="#step-2-install-supporting-libraries">Step 2: Install Supporting Libraries</a></li>
<li><a href="#step-3-configure-access-to-the-otlp-endpoint">Step 3: Configure Access to the OTLP Endpoint</a></li>
<li><a href="#3-1-expose-with-ingress">3.1: Expose with Ingress</a></li>
<li><a href="#3-2-use-port-forwarding-dev">3.2: Use Port Forwarding (Dev)</a></li>
<li><a href="#step-4-configure-environment-variables">Step 4: Configure Environment Variables</a></li>
<li><a href="#step-5-add-api-request-logic">Step 5: Add API Request Logic</a></li>
<li><a href="#step-6-create-a-test-componenttracebutton">Step 6: Create a Test Component(TraceButton)</a></li>
<li><a href="#step-7-create-the-home-page">Step 7: Create the Home Page</a></li>
<li><a href="#step-8-load-the-home-page-in-the-app-component">Step 8: Load the Home Page in the App Component</a></li>
<li><a href="#step-9-keep-the-main-tsx-file-as-is">Step 9: Keep the main.tsx file as is</a></li>
<li><a href="#step-10-start-development-server">Step 10: Start Development Server</a></li>
</ul>
</li>
<li><a href="#part-2-enabling-opentelemetry-tracing">Part 2: Enabling OpenTelemetry Tracing</a>
<ul class="sectlevel2">
<li><a href="#step-1-install-opentelemetry-packages">Step 1: Install OpenTelemetry Packages</a></li>
<li><a href="#step-2-initialize-opentelemetry-tracing">Step 2: Initialize OpenTelemetry Tracing</a></li>
<li><a href="#step-3-initialize-opentelemetry-in-the-main-tsx-file">Step 3: Initialize OpenTelemetry in the main.tsx file</a></li>
<li><a href="#step-4-set-up-cors-on-otlp-collector">Step 4: Set Up CORS on OTLP Collector</a></li>
</ul>
</li>
<li><a href="#validation">Validation</a>
<ul class="sectlevel2">
<li><a href="#using-consolespanexporter">Using ConsoleSpanExporter</a></li>
<li><a href="#using-otlptraceexporter">Using OTLPTraceExporter</a></li>
</ul>
</li>
<li><a href="#further-enhancements">Further Enhancements</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#references">References</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock img-wide">
<div class="content">
<img src="images/end-to-end-observability.png" alt="end to end observability">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This comprehensive guide walks through the process of implementing <strong>end-to-end observability</strong> in a <strong>React application</strong> using <strong>OpenTelemetry (OTel)</strong>. It covers application setup, OTLP tracing integration, and visualization using observability tools such as <strong>Jaeger</strong> and <strong>Grafana</strong>.</p>
</div>
<div class="paragraph">
<p>By instrumenting both the frontend and backend, developers can trace user interactions, monitor API calls, and gain full-stack visibility into their application’s behavior.</p>
</div>
<div class="paragraph">
<p>The guide consists of two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Part 1: Setting up a React application</p>
</li>
<li>
<p>Part 2: Integrating OpenTelemetry for frontend tracing</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="opentelemetry-language-sdk-status">OpenTelemetry Language SDK Status</h3>
<div class="paragraph">
<p>Note that the status of OpenTelemetry JavaScript SDK for Logs is currently in development.</p>
</div>
<div class="imageblock img-medium">
<div class="content">
<img src="images/otel-sdk-status.png" alt="otel sdk status">
</div>
<div class="title">Figure 1. OTel SDK Status from <a href="https://opentelemetry.io/docs/languages/" class="bare">https://opentelemetry.io/docs/languages/</a></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part-1-setting-up-the-react-application">Part 1: Setting Up the React Application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step-1-bootstrap-the-react-project">Step 1: Bootstrap the React Project</h3>
<div class="paragraph">
<p>Use Vite to create a new React + TypeScript project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>npm create vite@latest react-o11y-app <span class="nt">--template</span> react-ts

Need to <span class="nb">install </span>the following packages:
  create-vite@latest
  create-vite@6.5.0
  Ok to proceed? <span class="o">(</span>y<span class="o">)</span> y
? Select a framework: › React
? Select a variant: › TypeScript


<span class="nv">$ </span><span class="nb">cd </span>react-o11y-app
<span class="nv">$ </span>npm <span class="nb">install</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-2-install-supporting-libraries">Step 2: Install Supporting Libraries</h3>
<div class="paragraph">
<p>Install Axios and developer tools:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>npm <span class="nb">install </span>axios
<span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> eslint prettier</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-3-configure-access-to-the-otlp-endpoint">Step 3: Configure Access to the OTLP Endpoint</h3>
<div class="paragraph">
<p>You can expose the OTLP endpoint using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong> Ingress Controller</strong></p>
</li>
<li>
<p><strong>Port Forwarding</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="3-1-expose-with-ingress">3.1: Expose with Ingress</h3>
<div class="listingblock">
<div class="title">otel-collector-ingress.yaml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">networking.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Ingress</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">otel-collector-ingress</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">o11y</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">traefik</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ingressClassName</span><span class="pi">:</span> <span class="s">traefik</span>
  <span class="na">rules</span><span class="pi">:</span>
    <span class="c1">## otel-collector</span>
    <span class="c1">#</span><i class="conum" data-value="1"></i><b>(1)</b>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">otel-collector.nsa2.com</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">otel-collector</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">otlp-http</span>

    <span class="c1">#</span><i class="conum" data-value="2"></i><b>(2)</b>
    <span class="c1">## otel-spring-example</span>
    <span class="pi">-</span> <span class="na">host</span><span class="pi">:</span> <span class="s">otel-spring-example.nsa2.com</span>
      <span class="na">http</span><span class="pi">:</span>
        <span class="na">paths</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/</span>
            <span class="na">pathType</span><span class="pi">:</span> <span class="s">Prefix</span>
            <span class="na">backend</span><span class="pi">:</span>
              <span class="na">service</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span> <span class="s">otel-spring-example</span>
                <span class="na">port</span><span class="pi">:</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">http</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This rule exposes the OTLP endpoint for the OpenTelemetry Collector.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This rule exposes the OTLP endpoint for the OTEL Spring Example application.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Apply it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> react-o11y-backend-ingress.yaml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="3-2-use-port-forwarding-dev">3.2: Use Port Forwarding (Dev)</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl <span class="nt">-n</span> o11y port-forward service/otel-collector 4318:4318</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-4-configure-environment-variables">Step 4: Configure Environment Variables</h3>
<div class="paragraph">
<p>To configure the OpenTelemetry libraries, we will use environment variables. Create a <code>.env</code> file in the root of your project and add the following variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">touch</span> .env</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/.env</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="properties"><span class="py">VITE_OTEL_EXPORTER_OTLP_ENDPOINT</span><span class="p">=</span>
<span class="py">VITE_OTEL_SPRING_EXAMPLE_URL</span><span class="p">=</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The actual values for these variables will be set with environment variables like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="c">#$ export VITE_OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">VITE_OTEL_EXPORTER_OTLP_ENDPOINT</span><span class="o">=</span>http://otel-collector:4318
<span class="c"># OR</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">VITE_OTEL_EXPORTER_OTLP_ENDPOINT</span><span class="o">=</span>http://otel-collector.nsa2.com

<span class="nv">$ </span><span class="nb">export </span><span class="nv">VITE_OTEL_SPRING_EXAMPLE_URL</span><span class="o">=</span>http://otel-spring-example.nsa2.com</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-5-add-api-request-logic">Step 5: Add API Request Logic</h3>
<div class="listingblock">
<div class="title">src/api/observaility.ts</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>


<span class="kd">const</span> <span class="nx">otelSpringExampleUrl</span> <span class="o">=</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_OTEL_SPRING_EXAMPLE_URL</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">http://localhost:8080</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Using OTEL Spring Example URL:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">otelSpringExampleUrl</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="nx">otelSpringExampleUrl</span>
<span class="p">});</span>


<span class="k">export</span> <span class="kd">const</span> <span class="nx">sleepCall</span> <span class="o">=</span> <span class="k">async </span><span class="p">(</span><span class="nx">seconds</span><span class="p">:</span><span class="kr">number</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">`/sleep/</span><span class="p">${</span><span class="nx">seconds</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-6-create-a-test-componenttracebutton">Step 6: Create a Test Component(TraceButton)</h3>
<div class="paragraph">
<p>Build a simple button component to test interactions, and wire it into your App.tsx and main.tsx.</p>
</div>
<div class="listingblock">
<div class="title">src/components/TraceButton.tsx</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">sleepCall</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../api/observability</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">TraceButton</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">seconds</span><span class="p">,</span> <span class="nx">setSeconds</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">response</span><span class="p">,</span> <span class="nx">setResponse</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nf">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nf">setResponse</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Calling sleep endpoint with seconds:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">seconds</span><span class="p">);</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">sleepCall</span><span class="p">(</span><span class="nx">seconds</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">-- Response from sleep endpoint:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
      <span class="nf">setResponse</span><span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">]</span> <span class="o">||</span> <span class="s2">`Slept for </span><span class="p">${</span><span class="nx">seconds</span><span class="p">}</span><span class="s2"> seconds`</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Request failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="nf">setResponse</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error occurred</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
      <span class="nf">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="na">padding</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1rem</span><span class="dl">'</span> <span class="p">}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">label</span><span class="o">&gt;</span>
        <span class="nx">Sleep</span> <span class="na">Seconds</span><span class="p">:{</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">input</span>
          <span class="kd">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">number</span><span class="dl">"</span>
          <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">secondsInput</span><span class="dl">"</span>
          <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">seconds</span><span class="p">}</span>
          <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nf">setSeconds</span><span class="p">(</span><span class="nc">Number</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">))}</span>
          <span class="nx">min</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
          <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="na">width</span><span class="p">:</span> <span class="dl">'</span><span class="s1">60px</span><span class="dl">'</span><span class="p">,</span> <span class="na">marginRight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1rem</span><span class="dl">'</span> <span class="p">}}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/label</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span><span class="p">}</span> <span class="nx">id</span><span class="o">=</span><span class="dl">'</span><span class="s1">traceButton</span><span class="dl">'</span> <span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Waiting...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Call Sleep Endpoint</span><span class="dl">'</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span> <span class="na">marginTop</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1rem</span><span class="dl">'</span> <span class="p">}}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">response</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/p&gt;}&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-7-create-the-home-page">Step 7: Create the Home Page</h3>
<div class="listingblock">
<div class="title">src/pages/Home.tsx</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="p">{</span> <span class="nx">TraceButton</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/TraceButton</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Home</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Observability</span> <span class="nx">Test</span> <span class="nx">App</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">TraceButton</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Home</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-8-load-the-home-page-in-the-app-component">Step 8: Load the Home Page in the App Component</h3>
<div class="listingblock">
<div class="title">src/App.tsx</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="dl">'</span><span class="s1">./App.css</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">Home</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./pages/Home</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Home</span> <span class="o">/&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-9-keep-the-main-tsx-file-as-is">Step 9: Keep the main.tsx file as is</h3>
<div class="listingblock">
<div class="title">src/main.tsx</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="p">{</span> <span class="nx">StrictMode</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">createRoot</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom/client</span><span class="dl">'</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">./index.css</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.tsx</span><span class="dl">'</span>

<span class="nf">createRoot</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">)</span><span class="o">!</span><span class="p">).</span><span class="nf">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/StrictMode&gt;</span><span class="err">,
</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-10-start-development-server">Step 10: Start Development Server</h3>
<div class="paragraph">
<p>Start the development server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>npm run dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Visit <a href="http://localhost:5173" class="bare">http://localhost:5173</a> to test the app.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/react-app-ui.png" alt="react app ui">
</div>
<div class="title">Figure 2. React Application UI for Testing Observability</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="part-2-enabling-opentelemetry-tracing">Part 2: Enabling OpenTelemetry Tracing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In part 2, we will apply the OpenTelemetry libraries to our React application to store traces.</p>
</div>
<div class="sect2">
<h3 id="step-1-install-opentelemetry-packages">Step 1: Install OpenTelemetry Packages</h3>
<div class="paragraph">
<p>Install the OpenTelemetry libraries to enable observability features in your application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/api @opentelemetry/sdk-trace-web @opentelemetry/instrumentation-fetch
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/sdk-trace-base
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/resources
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/context-zone  @opentelemetry/instrumentation-document-load
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/instrumentation-xml-http-request
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/instrumentation-user-interaction
<span class="nv">$ </span>npm <span class="nb">install</span> @opentelemetry/exporter-trace-otlp-http</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-2-initialize-opentelemetry-tracing">Step 2: Initialize OpenTelemetry Tracing</h3>
<div class="listingblock">
<div class="title">src/otel.ts</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="p">{</span> <span class="nx">WebTracerProvider</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/sdk-trace-web</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span>  <span class="p">{</span>
    <span class="nx">resourceFromAttributes</span><span class="p">,</span>
    <span class="nx">defaultResource</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/resources</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
    <span class="nx">ATTR_SERVICE_NAME</span><span class="p">,</span>
    <span class="nx">ATTR_SERVICE_VERSION</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/semantic-conventions</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">OTLPTraceExporter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/exporter-trace-otlp-http</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">registerInstrumentations</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/instrumentation</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FetchInstrumentation</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/instrumentation-fetch</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ZoneContextManager</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/context-zone</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// import { SimpleSpanProcessor } from '@opentelemetry/sdk-trace-base';</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ConsoleSpanExporter</span><span class="p">,</span> <span class="nx">SimpleSpanProcessor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/sdk-trace-base</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DocumentLoadInstrumentation</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/instrumentation-document-load</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">UserInteractionInstrumentation</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/instrumentation-user-interaction</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">XMLHttpRequestInstrumentation</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/instrumentation-xml-http-request</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Logs</span>
<span class="c1">// import { logs } from '@opentelemetry/api';</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">OTLPLogExporter</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@opentelemetry/exporter-logs-otlp-http</span><span class="dl">'</span><span class="p">;</span>


<i class="conum" data-value="1"></i><b>(1)</b>
<span class="kd">const</span> <span class="nx">otlpEndpoint</span> <span class="o">=</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_OTEL_EXPORTER_OTLP_ENDPOINT</span><span class="p">;</span> <span class="c1">// Adjust to your OTLP endpoint</span>
<i class="conum" data-value="2"></i><b>(2)</b>
<span class="kd">const</span> <span class="nx">otelSpringExampleUrl</span> <span class="o">=</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_OTEL_SPRING_EXAMPLE_URL</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">http://localhost:8080</span><span class="dl">'</span><span class="p">;</span>
<span class="c1">// Convert to regex safely</span>
<span class="kd">const</span> <span class="nx">escapedUrl</span> <span class="o">=</span> <span class="nx">otelSpringExampleUrl</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">.*+?^${}()|[</span><span class="se">\]\\]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="se">\\</span><span class="s1">$&amp;</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">otelUrlRegex</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RegExp</span><span class="p">(</span><span class="nx">escapedUrl</span><span class="p">);</span>

<i class="conum" data-value="3"></i><b>(3)</b>
<span class="kd">const</span> <span class="nx">resource</span> <span class="o">=</span> <span class="nf">defaultResource</span><span class="p">().</span><span class="nf">merge</span><span class="p">(</span>
    <span class="nf">resourceFromAttributes</span><span class="p">({</span>
        <span class="p">[</span><span class="nx">ATTR_SERVICE_NAME</span><span class="p">]:</span> <span class="dl">'</span><span class="s1">react-o11y-app</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// Adjust to your service name</span>
        <span class="p">[</span><span class="nx">ATTR_SERVICE_VERSION</span><span class="p">]:</span> <span class="dl">'</span><span class="s1">1.0.0</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// Optional: Add version or other attributes</span>
    <span class="p">})</span>
<span class="p">);</span>

<i class="conum" data-value="4"></i><b>(4)</b>
<span class="kd">const</span> <span class="nx">traceExporter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OTLPTraceExporter</span><span class="p">({</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">otlpEndpoint</span><span class="p">}</span><span class="s2">/v1/traces`</span><span class="p">,</span> <span class="c1">// or your collector's trace endpoint</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{},</span> <span class="c1">// optional headers (e.g., for auth)</span>
<span class="p">});</span>



<i class="conum" data-value="5"></i><b>(5)</b>
<span class="kd">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WebTracerProvider</span><span class="p">({</span>
    <span class="na">spanProcessors</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nc">SimpleSpanProcessor</span><span class="p">(</span><span class="nx">traceExporter</span><span class="p">),</span>
        <span class="c1">// new SimpleSpanProcessor(new ConsoleSpanExporter()), // Optional: Console exporter for debugging</span>
    <span class="p">],</span>

    <span class="na">resource</span><span class="p">:</span> <span class="nx">resource</span><span class="p">,</span><span class="c1">// Optional: Add version or other attributes</span>
<span class="p">});</span>

<i class="conum" data-value="6"></i><b>(6)</b>
<span class="nx">provider</span><span class="p">.</span><span class="nf">register</span><span class="p">({</span>
    <span class="na">contextManager</span><span class="p">:</span> <span class="k">new</span> <span class="nc">ZoneContextManager</span><span class="p">(),</span> <span class="c1">// Use ZoneContextManager for Angular compatibility</span>
<span class="p">});</span>


<i class="conum" data-value="7"></i><b>(7)</b>
<span class="nf">registerInstrumentations</span><span class="p">({</span>
  <span class="na">instrumentations</span><span class="p">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nc">DocumentLoadInstrumentation</span><span class="p">(),</span>
    <span class="k">new</span> <span class="nc">UserInteractionInstrumentation</span><span class="p">(),</span>
    <span class="k">new</span> <span class="nc">FetchInstrumentation</span><span class="p">({</span>
      <span class="na">propagateTraceHeaderCorsUrls</span><span class="p">:</span> <span class="p">[</span><span class="sr">/</span><span class="se">\/</span><span class="sr">api</span><span class="se">\/</span><span class="sr">/</span><span class="p">,</span> <span class="nx">otelUrlRegex</span><span class="p">],</span> <span class="c1">// adjust to your backend</span>
    <span class="p">}),</span>
    <span class="k">new</span> <span class="nc">XMLHttpRequestInstrumentation</span><span class="p">({</span>
      <span class="na">propagateTraceHeaderCorsUrls</span><span class="p">:</span> <span class="p">[</span><span class="sr">/</span><span class="se">\/</span><span class="sr">api</span><span class="se">\/</span><span class="sr">/</span><span class="p">,</span> <span class="nx">otelUrlRegex</span><span class="p">],</span>
    <span class="p">}),</span>
  <span class="p">],</span>
<span class="p">});</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The OTLP endpoint is configured using the environment variable <code>VITE_OTEL_EXPORTER_OTLP_ENDPOINT</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The OTEL Spring Example URL is configured using the environment variable <code>VITE_OTEL_SPRING_EXAMPLE_URL</code>. This URL is used to propagate trace headers to the backend.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The resource is created with service name and version attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>OTLPTraceExporter</code> is initialized with the OTLP endpoint for traces.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <code>WebTracerProvider</code> is created with a <code>SimpleSpanProcessor</code> that uses the <code>OTLPTraceExporter</code> to send traces.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>ZoneContextManager</code> is registered to manage context propagation in the application.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The instrumentations are registered to automatically instrument document load events, user interactions, fetch requests, and XMLHttpRequests. The <code>propagateTraceHeaderCorsUrls</code> option is used to specify which URLs should propagate trace headers.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="instrumentation-details">Instrumentation Details</h4>
<div class="paragraph">
<p>The following instrumentations are automatically registered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DocumentLoadInstrumentation: Automatically instruments document load events.</p>
</li>
<li>
<p>UserInteractionInstrumentation: Automatically instruments user interactions like clicks and form submissions.</p>
</li>
<li>
<p>FetchInstrumentation: Automatically instruments fetch requests, propagating trace headers to specified URLs.</p>
</li>
<li>
<p>XMLHttpRequestInstrumentation: Automatically instruments XMLHttpRequests, propagating trace headers to specified URLs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-3-initialize-opentelemetry-in-the-main-tsx-file">Step 3: Initialize OpenTelemetry in the main.tsx file</h3>
<div class="paragraph">
<p>Add the following code to the top of your <code>main.tsx</code> file to initialize OpenTelemetry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="dl">'</span><span class="s1">./otel</span><span class="dl">'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main.tsx - updated</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="k">import</span> <span class="dl">'</span><span class="s1">./otel</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">StrictMode</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">createRoot</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-dom/client</span><span class="dl">'</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">./index.css</span><span class="dl">'</span>
<span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./App.tsx</span><span class="dl">'</span>

<span class="nf">createRoot</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">root</span><span class="dl">'</span><span class="p">)</span><span class="o">!</span><span class="p">).</span><span class="nf">render</span><span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">StrictMode</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">App</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/StrictMode&gt;</span><span class="err">,
</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-4-set-up-cors-on-otlp-collector">Step 4: Set Up CORS on OTLP Collector</h3>
<div class="paragraph">
<p>Ensure your OpenTelemetry Collector allows frontend origins:</p>
</div>
<div class="paragraph">
<p>otel-collector.yaml</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml">  <span class="na">config</span><span class="pi">:</span>
    <span class="na">receivers</span><span class="pi">:</span>
      <span class="na">otlp</span><span class="pi">:</span>
        <span class="na">protocols</span><span class="pi">:</span>
          <span class="na">grpc</span><span class="pi">:</span>
            <span class="na">endpoint</span><span class="pi">:</span> <span class="s">0.0.0.0:4317</span>
          <span class="na">http</span><span class="pi">:</span>
            <span class="na">endpoint</span><span class="pi">:</span> <span class="s">0.0.0.0:4318</span>

            <span class="c1">#</span><i class="conum" data-value="1"></i><b>(1)</b>
            <span class="na">cors</span><span class="pi">:</span>
              <span class="na">allowed_origins</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">http://localhost:5173"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">http://react-o11y-app.nsa2.com"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">https://react-o11y-app.nsa2.com"</span>

              <span class="na">allowed_headers</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">Authorization"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">Content-Type"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">Accept"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">User-Agent"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">X-Forwarded-For"</span>
                <span class="pi">-</span> <span class="s2">"</span><span class="s">X-Requested-With"</span>
              <span class="na">max_age</span><span class="pi">:</span> <span class="s">3600</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The CORS configuration allows requests from the specified origins, which is necessary for the frontend to communicate with the OTLP endpoint.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validation">Validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start the app and click the button. Traces should appear in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Console (if ConsoleSpanExporter enabled)</p>
</li>
<li>
<p>Jaeger or Grafana UI</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">export </span><span class="nv">VITE_OTEL_EXPORTER_OTLP_ENDPOINT</span><span class="o">=</span>http://otel-collector.nsa2.com
<span class="nv">$ </span><span class="nb">export </span><span class="nv">VITE_OTEL_SPRING_EXAMPLE_URL</span><span class="o">=</span>http://otel-spring-example.nsa2.com

<span class="nv">$ </span>npm run dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Visit <code><a href="http://localhost:5173" class="bare">http://localhost:5173</a></code></p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/react-app-ui.png" alt="react app ui">
</div>
<div class="title">Figure 3. React Application UI for Testing Observability</div>
</div>
<div class="sect2">
<h3 id="using-consolespanexporter">Using ConsoleSpanExporter</h3>
<div class="paragraph">
<p>All traces will be logged to the console. This is useful for debugging and verifying that traces are being sent correctly. You can also use the ConsoleSpanExporter to log traces to the console for debugging purposes.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/traces-on-console.png" alt="traces on console">
</div>
<div class="title">Figure 4. Traces from React in Console</div>
</div>
<div class="paragraph">
<p>To turn off the ConsoleSpanExporter, you can comment out the line in the <code>otel.ts</code> file:</p>
</div>
<div class="listingblock">
<div class="title">src/otel.ts - updated</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="typescript"><span class="kd">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WebTracerProvider</span><span class="p">({</span>
    <span class="na">spanProcessors</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nc">SimpleSpanProcessor</span><span class="p">(</span><span class="nx">traceExporter</span><span class="p">),</span>
        <span class="c1">// new SimpleSpanProcessor(new ConsoleSpanExporter()), // Optional: Console exporter for debugging</span>
    <span class="p">],</span>

    <span class="na">resource</span><span class="p">:</span> <span class="nx">resource</span><span class="p">,</span><span class="c1">// Optional: Add version or other attributes</span>
<span class="p">});</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-otlptraceexporter">Using OTLPTraceExporter</h3>
<div class="paragraph">
<p>The <code>OTLPTraceExporter</code> is used to send traces to an OpenTelemetry Collector or backend that supports the OTLP protocol.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/grafana-jaeger-search.png" alt="grafana jaeger search">
</div>
<div class="title">Figure 5. Grafana UI for Jaeger - Search Traces</div>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/grafana-jaeger-details.png" alt="grafana jaeger details">
</div>
<div class="title">Figure 6. Grafana UI for Jaeger - Detail View from react-o11y-app and otel-spring-example</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further-enhancements">Further Enhancements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Planned additions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploying the React application in Kubernetes</p>
</li>
<li>
<p>Visualizing frontend traces in Grafana dashboards</p>
</li>
<li>
<p>Adding OTLP logging support</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide demonstrated how to build an end-to-end observable React application using OpenTelemetry. By integrating tracing at the frontend and backend levels, developers can gain actionable insights and improve the overall reliability and debuggability of their applications.</p>
</div>
<div class="paragraph">
<p>📘 View the web version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nsalexamy.github.io/service-foundry/pages/documents/o11y-foundry/o11y-in-react/" class="bare">https://nsalexamy.github.io/service-foundry/pages/documents/o11y-foundry/o11y-in-react/</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references">References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://opentelemetry.io/docs/languages/js/getting-started/browser/" class="bare">https://opentelemetry.io/docs/languages/js/getting-started/browser/</a></p>
</li>
<li>
<p><a href="https://opentelemetry.io/docs/languages/js/instrumentation/" class="bare">https://opentelemetry.io/docs/languages/js/instrumentation/</a></p>
</li>
</ul>
</div>
</div>
</div>
        </div>
    </main>
</div>




<script>
    const toc = document.getElementById('toc');
    const container = document.getElementById('toc-container');
    if (toc && container) {
        container.appendChild(toc);
    }
</script>


<!--<button onclick="toggleTheme()" style="position: fixed; bottom: 1rem; right: 1rem; padding: 0.5rem 1rem; background-color: var(&#45;&#45;link); color: white; border: none; border-radius: 0.375rem; cursor: pointer;">-->
<!--    Toggle Theme-->
<!--</button>-->

<!--<script>-->
<!--    function toggleTheme() {-->
<!--        const html = document.documentElement;-->
<!--        const isDark = html.getAttribute("data-theme") === "dark";-->
<!--        html.setAttribute("data-theme", isDark ? "light" : "dark");-->
<!--        localStorage.setItem("theme", isDark ? "light" : "dark");-->
<!--    }-->

<!--    document.addEventListener("DOMContentLoaded", () => {-->
<!--        const savedTheme = localStorage.getItem("theme") || "light";-->
<!--        document.documentElement.setAttribute("data-theme", savedTheme);-->
<!--    });-->
<!--</script>-->

<!-- Footer -->
<footer class="bg-gray-900 text-white text-sm py-6 text-center">
    © 2025 Service Foundry. All rights reserved.
</footer>
</body>
</html>