<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grafana Dashboard and Alerts for Traces</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#simple-grafana-dashboard-for-jaeger-traces">Simple Grafana Dashboard for Jaeger Traces</a></li>
<li><a href="#transmission-of-traces-to-prometheus">Transmission of Traces to Prometheus</a>
<ul class="sectlevel2">
<li><a href="#spanmetrics-processor">spanmetrics processor</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide provides instructions on how to set up Grafana dashboards and alerts for monitoring traces in your observability stack. It covers the following topics:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="simple-grafana-dashboard-for-jaeger-traces">Simple Grafana Dashboard for Jaeger Traces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to create a simple Grafana dashboard to visualize Jaeger traces. The dashboard will include panels for displaying trace data, such as the number of traces, trace duration, and error rates.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transmission-of-traces-to-prometheus">Transmission of Traces to Prometheus</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="spanmetrics-processor">spanmetrics processor</h3>
<div class="paragraph">
<p>The <code>spanmetrics</code> processor is used to convert trace spans into metrics that can be scraped by Prometheus. This allows you to monitor trace data alongside other metrics in your observability stack.</p>
</div>
<div class="listingblock">
<div class="title">otel-collector.yaml - spanmetrics processor configuration</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml">    <span class="na">processors</span><span class="pi">:</span>

      <span class="na">spanmetrics</span><span class="pi">:</span>
        <span class="na">metrics_exporter</span><span class="pi">:</span> <span class="s">prometheus</span>
        <span class="na">histogram</span><span class="pi">:</span>
          <span class="na">explicit</span><span class="pi">:</span>
            <span class="na">buckets</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">0.005</span><span class="pi">,</span> <span class="nv">0.01</span><span class="pi">,</span> <span class="nv">0.05</span><span class="pi">,</span> <span class="nv">0.1</span><span class="pi">,</span> <span class="nv">0.5</span><span class="pi">,</span> <span class="nv">1.0</span><span class="pi">,</span> <span class="nv">2.0</span><span class="pi">,</span> <span class="nv">5.0</span><span class="pi">,</span> <span class="nv">10.0</span><span class="pi">]</span>
        <span class="na">dimensions</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">http.request.method</span>
          <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">http.response.status_code</span>
          <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">service.name</span>
          <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">span.kind</span>

    <span class="na">exporters</span><span class="pi">:</span>
      <span class="na">prometheus</span><span class="pi">:</span>
        <span class="na">endpoint</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.0.0.0:8889"</span>

    <span class="na">service</span><span class="pi">:</span>
      <span class="na">pipelines</span><span class="pi">:</span>
        <span class="na">traces</span><span class="pi">:</span>
          <span class="na">receivers</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">otlp</span><span class="pi">]</span>
          <span class="na">processors</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">batch</span><span class="pi">,</span> <span class="nv">spanmetrics</span><span class="pi">]</span>
          <span class="na">exporters</span><span class="pi">:</span> <span class="pi">[]</span>

        <span class="na">metrics/spanmetrics</span><span class="pi">:</span>
          <span class="na">receivers</span><span class="pi">:</span> <span class="pi">[]</span>
          <span class="na">processors</span><span class="pi">:</span> <span class="pi">[]</span>
          <span class="na">exporters</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">prometheus</span><span class="pi">]</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>