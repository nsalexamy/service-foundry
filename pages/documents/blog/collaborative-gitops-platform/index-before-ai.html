<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Collaborative GitOps Platform for Kubernetes Workload Management</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#key-components">Key Components</a></li>
</ul>
</li>
<li><a href="#service-foundry-console">Service Foundry Console</a>
<ul class="sectlevel2">
<li><a href="#git-ops-menu">Git Ops Menu</a></li>
<li><a href="#k8s-application-orchestration-menu">K8s Application Orchestration Menu</a></li>
</ul>
</li>
<li><a href="#gitops-manage-kubernetes-resources-in-git">GitOps - Manage Kubernetes Resources in Git</a>
<ul class="sectlevel2">
<li><a href="#argocd-continuous-delivery-for-kubernetes">ArgoCD - Continuous Delivery for Kubernetes</a></li>
<li><a href="#gitops-manage-applications-running-on-kubernetes">GitOps - Manage Applications Running on Kubernetes</a></li>
<li><a href="#gitops-manage-custom-enterprise-applications">GitOps - Manage Custom Enterprise Applications</a></li>
<li><a href="#gitops-manage-open-source-software">GitOps - Manage Open Source Software</a></li>
<li><a href="#gitops-manage-gitops-applications">GitOps - Manage GitOps Applications</a></li>
</ul>
</li>
<li><a href="#kubernetes-application-orchestration">Kubernetes Application Orchestration</a>
<ul class="sectlevel2">
<li><a href="#framework-core">Framework Core</a></li>
<li><a href="#shared-components">Shared Components</a></li>
<li><a href="#observability-stack">Observability Stack</a></li>
<li><a href="#single-sign-on-sso-stack">Single Sign-On (SSO) Stack</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock img-wide">
<div class="content">
<img src="./images/collaborative-gitops-platform.png" alt="collaborative gitops platform">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This project aims to build a collaborative GitOps platform for managing Kubernetes workloads. The platform leverages various tools and technologies to provide a seamless experience for developers and operators.</p>
</div>
<div class="paragraph">
<p>Service Foundry is a Kubernetes-based platform that simplifies the deployment and management of applications. It provides a set of tools and services to help developers and operators manage their applications effectively.</p>
</div>
<div class="paragraph">
<p>It supports the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manage all Kubernetes resources in a Git repository.</p>
</li>
<li>
<p>Automate the deployment of applications using ArgoCD.</p>
</li>
<li>
<p>Provision custom enterprise applications saved in a private Container Registry.</p>
</li>
<li>
<p>Provision Open Source applications saved in a public Container Registry.</p>
</li>
<li>
<p>Built-in Oauth2 SSO authentication and authorization.</p>
</li>
<li>
<p>Observability stack with Prometheus, Grafana, Loki, and Tempo etc.</p>
</li>
<li>
<p>Applications orchestration for complex workloads like Observability stack and Big Data stack.</p>
</li>
<li>
<p>Single Sign-On (SSO) integration for custom Kubernetes services.</p>
</li>
<li>
<p>Encrypted secrets management using SealedSecrets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This platform is designed to facilitate collaboration among team members, enabling them to work together on Kubernetes workloads using GitOps principles. By using Git as the single source of truth, the platform ensures that all changes to the infrastructure and applications are versioned and auditable.</p>
</div>
<div class="sect2">
<h3 id="key-components">Key Components</h3>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/key-components.png" alt="key components">
</div>
</div>
<div class="paragraph">
<p>The key components of the platform include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Git Repository: A central repository to store Kubernetes manifests and configurations.</p>
</li>
<li>
<p>ArgoCD: A declarative, GitOps continuous delivery tool for Kubernetes.</p>
</li>
<li>
<p>Resource Generator: A tool to generate Kubernetes manifests from templates.</p>
</li>
<li>
<p>Service Foundry Builder: A Kubernetes Job that executes the resource generator and pushes the generated manifests to the Git repository and creates ArgoCD applications.</p>
</li>
<li>
<p>Service Foundry Console: A web-based interface for managing and monitoring the platform.</p>
</li>
<li>
<p>Service Foundry Backend: A backend service that handles API requests and interacts with the Git repository and ArgoCD.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-foundry-console">Service Foundry Console</h2>
<div class="sectionbody">
<div class="imageblock img-wide">
<div class="content">
<img src="./images/service-foundry-console.png" alt="service foundry console">
</div>
</div>
<div class="paragraph">
<p>The Service Foundry Console is a web-based interface that allows users to manage and monitor the platform. It provides features such as:</p>
</div>
<div class="sect2">
<h3 id="git-ops-menu">Git Ops Menu</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Managed Applications</strong>: View and manage all applications deployed on the platform.</p>
</li>
<li>
<p><strong>Enterprise Applications</strong>: Provision custom enterprise applications from a private Container Registry. Kubernetes manifests are saved in a private Git repository and deployed using ArgoCD.</p>
</li>
<li>
<p><strong>OpenSource Software</strong>: Provision open-source applications from a public Container Registry. Kubernetes manifests are saved in a private Git repository and deployed using ArgoCD.</p>
</li>
<li>
<p><strong>GitOps Applications</strong>: View and manage all GitOps applications deployed on the platform. These applications can be deployed using ArgoCD or edited directly in the Git repository.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="k8s-application-orchestration-menu">K8s Application Orchestration Menu</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Framework Core</strong>: Manage the core components of the platform, including ArgoCD, SealedSecrets, Keycloak, Traefik, Service Foundry Console, and Service Foundry Backend.</p>
</li>
<li>
<p><strong>Shared Components</strong>: Manage shared components such as cert-manager, prometheus-operator, opentelemetry-operator, and spark-operator. These components are supposed to be installed only once in the cluster.</p>
</li>
<li>
<p><strong>Observability Stack</strong>: Deploy and manage the observability stack, including OpenTelemetry Collector, Prometheus, Grafana, Loki, and Tempo and more. The observability stack is deployed using a predefined orchestration that sets up all necessary components and configurations. Kubernetes workloads and microservices can leverage the Observability stack for monitoring and tracing.</p>
</li>
<li>
<p><strong>Single Sign-On (SSO) Stack</strong>: Deploy and manage the SSO stack using Keycloak, Oauth2 Proxy, and Traefik Ingresses. The SSO stack is deployed using a predefined orchestration that sets up all necessary components and configurations. Custom enterprise applications can be integrated with the SSO stack for authentication and authorization.</p>
</li>
<li>
<p><strong>Spring Backend</strong>: Deploy and manage the Spring Backend stack, including Spring Boot applications, Spring ConfigWatcher, PostgreSQL, Redis, RabbitMQ, and other related components. Spring Boot microservices can leverage the Observability stack for monitoring and tracing and the SSO stack for authentication and authorization. The Spring Backend stack is deployed using a predefined orchestration that sets up all necessary components and configurations. (WIP)</p>
</li>
<li>
<p><strong>Big Data</strong>: Deploy and manage the big data stack, including Apache Airflow, Apache Spark, MinIO, Neo4j, OpenSearch stack, Dbt, Sling and ETL tools and databases. The big data stack is deployed using a predefined orchestration that sets up all necessary components and configurations. (WIP)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gitops-manage-kubernetes-resources-in-git">GitOps - Manage Kubernetes Resources in Git</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GitOps is a set of principles and practices for managing infrastructure and applications using Git as the single source of truth. In a GitOps workflow, all changes to the infrastructure and applications are made through pull requests to a Git repository. The changes are then automatically applied to the target environment using automation tools like ArgoCD.</p>
</div>
<div class="sect2">
<h3 id="argocd-continuous-delivery-for-kubernetes">ArgoCD - Continuous Delivery for Kubernetes</h3>
<div class="paragraph">
<p>ArgoCD is a declarative, GitOps continuous delivery tool for Kubernetes. It continuously monitors the Git repository for changes and automatically applies them to the target environment. ArgoCD provides a web-based interface for managing and monitoring the deployment process.</p>
</div>
<div class="sect3">
<h4 id="application-types-of-argocd">Application types of ArgoCD</h4>
<div class="paragraph">
<p>There are two types of applications in ArgoCD:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Kustomize Application</strong>: A Kustomize application is a type of ArgoCD application that uses Kustomize to manage Kubernetes manifests. Kustomize allows users to create and manage Kubernetes resources using a declarative approach. Users can define a base set of resources and then create overlays to customize the resources for different environments.</p>
</li>
<li>
<p><strong>Helm Application</strong>: A Helm application is a type of ArgoCD application that uses Helm to manage Kubernetes manifests. Helm is a package manager for Kubernetes that allows users to define, install, and upgrade applications using charts. Users can create and manage Helm charts to package their applications and deploy them to Kubernetes clusters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Service Foundry Builder supports both Kustomize and Helm applications. Users can choose the application type based on their requirements and preferences.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gitops-manage-applications-running-on-kubernetes">GitOps - Manage Applications Running on Kubernetes</h3>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/managed-applications.png" alt="managed applications">
</div>
</div>
<div class="paragraph">
<p>The platform allows users to manage applications running on Kubernetes using GitOps principles. Users can view and manage all applications deployed on the platform, including custom enterprise applications and open-source software.</p>
</div>
<div class="paragraph">
<p>Argo CD statuses can be viewed directly in the Service Foundry Console. Argo CD applications can be uninstalled on this page if needed. Users can also edit the Kubernetes manifests directly in the Git repository using the built-in editor. Then the changes will be automatically applied to the cluster by Argo CD.</p>
</div>
</div>
<div class="sect2">
<h3 id="gitops-manage-custom-enterprise-applications">GitOps - Manage Custom Enterprise Applications</h3>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/enterprise-applications.png" alt="enterprise applications">
</div>
</div>
<div class="paragraph">
<p>The platform provides a way to manage custom enterprise applications. Users can provision custom applications from a private Container Registry. Kubernetes manifests are saved in a private Git repository and deployed using ArgoCD.
The Secret manifests are encrypted using SealedSecrets to ensure the security of sensitive information.</p>
</div>
<div class="sect3">
<h4 id="encrypting-secrets-with-sealedsecrets">Encrypting Secrets with SealedSecrets</h4>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/encrypted-secrets.png" alt="encrypted secrets">
</div>
</div>
<div class="paragraph">
<p>For Kubernetes Secrets, the platform uses SealedSecrets to encrypt sensitive information. SealedSecrets are encrypted using a public key, and only the controller running in the cluster can decrypt them using the corresponding private key. This ensures that sensitive information is not exposed in the Git repository.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gitops-manage-open-source-software">GitOps - Manage Open Source Software</h3>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/opensource-software.png" alt="opensource software">
</div>
</div>
<div class="paragraph">
<p>The platform also provides a way to manage open-source software. Users can provision open-source applications from a public Container Registry. Kubernetes manifests are saved in a private Git repository and deployed using ArgoCD.</p>
</div>
</div>
<div class="sect2">
<h3 id="gitops-manage-gitops-applications">GitOps - Manage GitOps Applications</h3>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-applications.png" alt="gitops applications">
</div>
</div>
<div class="paragraph">
<p>The platform allows users to manage all GitOps applications saved in the Git repository. These applications can be deployed using ArgoCD or edited directly in the Git repository. Uses can also delete the application manifests files and related Kubernetes manifests directly on this page if applications are no longer needed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kubernetes-application-orchestration">Kubernetes Application Orchestration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kubernetes application orchestration is a way to manage complex applications that consist of multiple components and services. The platform provides predefined orchestrations for various application stacks, including the Observability stack, SSO stack, Spring Backend stack, and Big Data stack.</p>
</div>
<div class="sect2">
<h3 id="framework-core">Framework Core</h3>
<div class="paragraph">
<p>The components in the Framework Core are the core components of the platform. They include ArgoCD, SealedSecrets, Keycloak, Traefik, Service Foundry Console, and Service Foundry Backend. These components are essential for the platform to function correctly. These components are deployed when the platform is set up for the first time.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/framework-core.png" alt="framework core">
</div>
</div>
</div>
<div class="sect2">
<h3 id="shared-components">Shared Components</h3>
<div class="paragraph">
<p>Shared components are the components that are used by multiple application stacks. They include cert-manager, prometheus-operator, opentelemetry-operator, and spark-operator. These components are supposed to be installed only once in the cluster and can be leveraged by other application stacks.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/shared-components.png" alt="shared components">
</div>
</div>
</div>
<div class="sect2">
<h3 id="observability-stack">Observability Stack</h3>
<div class="paragraph">
<p>The Observability stack provides monitoring and tracing capabilities for Kubernetes workloads and microservices. It includes OpenTelemetry Collector, Prometheus, Grafana, Loki, and Tempo and more. The Observability stack is deployed using a predefined orchestration that sets up all necessary components and configurations. Kubernetes workloads and microservices can leverage the Observability stack for monitoring and tracing.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/observability.png" alt="observability">
</div>
</div>
<div class="sect3">
<h4 id="profiles">Profiles</h4>
<div class="paragraph">
<p>The Observability stack provides three profiles: Dev, Staging, adn Production. Each profile has different configurations and resource requirements.</p>
</div>
<div class="paragraph">
<p>Dev profile is designed for development and testing purposes. It has minimal resource requirements and is suitable for small-scale deployments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prometheus</p>
</li>
<li>
<p>Grafana</p>
</li>
<li>
<p>OpenTelemetry Collector</p>
</li>
<li>
<p>Kubelet Cadvisor Collector</p>
</li>
<li>
<p>Tompo using MinIO as storage</p>
</li>
<li>
<p>Loki using MinIO as storage</p>
</li>
<li>
<p>MinIO</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Staging profile is designed for staging and pre-production environments. It has moderate resource requirements and is suitable for medium-scale deployments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Prometheus</p>
</li>
<li>
<p>Grafana</p>
</li>
<li>
<p>OpenSearch</p>
</li>
<li>
<p>OpenSearch Data Prepper</p>
</li>
<li>
<p>OpenTelemetry Collector</p>
</li>
<li>
<p>Kubelet Cadvisor Collector</p>
</li>
<li>
<p>Tempo using S3 as storage</p>
</li>
<li>
<p>Loki using S3 as storage</p>
</li>
<li>
<p>MinIO</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Production profile is designed for production environments. It has high resource requirements and is suitable for large-scale deployments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cassandra</p>
</li>
<li>
<p>Jaeger</p>
</li>
<li>
<p>Prometheus</p>
</li>
<li>
<p>Grafana</p>
</li>
<li>
<p>OpenSearch</p>
</li>
<li>
<p>OpenSearch Data Prepper</p>
</li>
<li>
<p>OpenSearch Dashboards</p>
</li>
<li>
<p>OpenTelemetry Collector</p>
</li>
<li>
<p>Kubelet Cadvisor Collector</p>
</li>
<li>
<p>Tempo using S3 as storage</p>
</li>
<li>
<p>Loki using S3 as storage</p>
</li>
<li>
<p>MinIO</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="single-sign-on-sso-stack">Single Sign-On (SSO) Stack</h3>
<div class="paragraph">
<p>The SSO stack provides authentication and authorization capabilities for custom Kubernetes services. It includes Keycloak, Oauth2 Proxy, and Traefik Ingresses. The SSO stack is deployed using a predefined orchestration that sets up all necessary components and configurations. Custom enterprise applications can be integrated with the SSO stack for authentication and authorization.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/single-sign-on.png" alt="single sign on">
</div>
</div>
<div class="paragraph">
<p>All hostnames configured as the Ingress hosts in the SSO stack will be automatically added to the Keycloak&#8217;s valid redirect URIs. And users can access these hostnames with the same SSO authentication session of Service Foundry Console.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This collaborative GitOps platform provides a comprehensive solution for managing Kubernetes workloads using GitOps principles. By leveraging tools like ArgoCD, SealedSecrets, and predefined orchestrations, the platform simplifies the deployment and management of applications on Kubernetes. The web-based Service Foundry Console offers an intuitive interface for users to manage and monitor their applications effectively.</p>
</div>
<div class="paragraph">
<p>The platform is designed to facilitate collaboration among team members, enabling them to work together on Kubernetes workloads using Git as the single source of truth. This ensures that all changes to the infrastructure and applications are versioned and auditable, promoting transparency and accountability within the team.</p>
</div>
</div>
</div>
</body>
</html>