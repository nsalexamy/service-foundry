<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Setting up your own GitHub Helm Chart Repository</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#step-1-create-a-github-repository-helm-charts">Step 1: Create a GitHub Repository (helm-charts)</a></li>
<li><a href="#step-2-create-helm-charts">Step 2: Create Helm Charts</a></li>
<li><a href="#step-3-package-helm-charts">Step 3: Package Helm Charts</a></li>
<li><a href="#step-4-create-an-index-file">Step 4: Create an Index File</a></li>
<li><a href="#step-5-commit-and-push-to-github">Step 5: Commit and Push to GitHub</a></li>
<li><a href="#step-6-host-on-github-pages">Step 6: Host on GitHub Pages</a></li>
<li><a href="#step-7-add-the-repository-to-helm">Step 7: Add the Repository to Helm</a></li>
<li><a href="#step-8-install-charts-from-your-repository">Step 8: Install Charts from Your Repository</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step-1-create-a-github-repository-helm-charts">Step 1: Create a GitHub Repository (helm-charts)</h3>
<div class="paragraph">
<p>Create a new GitHub repository to host your Helm charts. You can name it something like <code>helm-charts</code>. Make sure to initialize the repository with a README file.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-2-create-helm-charts">Step 2: Create Helm Charts</h3>
<div class="paragraph">
<p>Create your Helm charts using the <code>helm create</code> command. For example, to create a chart named <code>my-chart</code>, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm create service-foundry-builder</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add or remove Helm template files as needed. You can also update a <code>values.yaml</code> file to customize the chart&#8217;s configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="step-3-package-helm-charts">Step 3: Package Helm Charts</h3>
<div class="paragraph">
<p>Package your Helm charts using the <code>helm package</code> command. This will create a <code>.tgz</code> file for each chart in the current directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm package service-foundry-builder</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-4-create-an-index-file">Step 4: Create an Index File</h3>
<div class="paragraph">
<p>The index.yaml file is a metadata file that contains information about the charts in your repository. It is used by Helm to find and install charts from your repository.</p>
</div>
<div class="paragraph">
<p>Create an index file for your Helm charts using the <code>helm repo index</code> command. This will generate an <code>index.yaml</code> file that contains metadata about your charts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm repo index <span class="nb">.</span> <span class="nt">--url</span> https://nsalexamy.github.io/helm-charts</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-5-commit-and-push-to-github">Step 5: Commit and Push to GitHub</h3>
<div class="paragraph">
<p>Add the generated <code>.tgz</code> files and <code>index.yaml</code> file to your GitHub repository. You can do this using the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>git add <span class="nb">.</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Add Helm charts"</span>
<span class="nv">$ </span>git push origin main</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-6-host-on-github-pages">Step 6: Host on GitHub Pages</h3>
<div class="paragraph">
<p>Enable GitHub Pages for your repository. Go to the repository settings, scroll down to the "GitHub Pages" section, and select the <code>gh-pages</code> branch as the source. This will host your Helm charts on GitHub Pages.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new branch named <code>gh-pages</code> in your repository. You can do this on GitHub by clicking on the "New Branch" button and typing <code>gh-pages</code>. This will create a new branch for hosting your Helm charts.</p>
</li>
<li>
<p>Enable GitHub Pages for your repository. Go to the repository settings, scroll down to the "GitHub Pages" section, and select the <code>gh-pages</code> branch as the source. This will host your Helm charts on GitHub Pages.</p>
</li>
<li>
<p>Make sure to set the source to the <code>gh-pages</code> branch in the GitHub Pages settings. This will allow GitHub to serve the files from that branch as a website.</p>
</li>
<li>
<p>Merge the main branch into the <code>gh-pages</code> branch. You can do this using the Pull Request feature on GitHub. Create a new pull request from the <code>main</code> branch to the <code>gh-pages</code> branch and merge it. This will copy the files from the main branch to the <code>gh-pages</code> branch.</p>
</li>
<li>
<p>After merging, your Helm charts will be available at <code><a href="https://&lt;username&gt;.github.io/&lt;repository&gt;/index.yaml" class="bare">https://&lt;username&gt;.github.io/&lt;repository&gt;/index.yaml</a></code>. You can access the index file by navigating to this URL in your web browser.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="step-7-add-the-repository-to-helm">Step 7: Add the Repository to Helm</h3>
<div class="paragraph">
<p>Add your GitHub repository as a Helm repository using the <code>helm repo add</code> command. Replace <code>&lt;username&gt;</code> with your GitHub username and <code>&lt;repository&gt;</code> with the name of your repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm repo add service-foundry https://nsalexamy.github.io/helm-charts

<span class="c"># Verify the repository is added</span>
<span class="nv">$ </span>helm repo list</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-8-install-charts-from-your-repository">Step 8: Install Charts from Your Repository</h3>
<div class="paragraph">
<p>You can now install charts from your GitHub Helm chart repository using the <code>helm install</code> command. For example, to install the <code>service-foundry-builder</code> chart, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm <span class="nb">install </span>service-foundry-builder service-foundry/service-foundry-builder <span class="nt">-n</span> service-foundry <span class="nt">--create-namespace</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>