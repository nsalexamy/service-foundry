<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SSL with Let&#8217;s Encrypt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#install-cert-manager">Install cert-manager</a></li>
<li><a href="#install-certbot">Install certbot</a>
<ul class="sectlevel2">
<li><a href="#install-certbot-on-macos">Install certbot on MacOS</a></li>
</ul>
</li>
<li><a href="#obtain-challenge-tokens">Obtain Challenge Tokens</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide provides step-by-step instructions on how to secure your applications with SSL certificates from Let&#8217;s Encrypt using the Service Foundry Console. By following this guide, you will be able to set up automated SSL certificate management for your services, ensuring secure communication over HTTPS.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin, ensure you have the following prerequisites in place:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Domain Name: You need a registered domain name that you own or control.</p>
</li>
<li>
<p>DNS Configuration: Ensure that your domain&#8217;s DNS records are correctly configured to point to your Kubernetes cluster&#8217;s ingress controller.</p>
</li>
<li>
<p>Kubernetes Cluster: A running Kubernetes cluster with access to deploy resources.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-cert-manager">Install cert-manager</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="install-certbot">Install certbot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To obtain SSL certificates from Let&#8217;s Encrypt, we will use certbot. Follow the instructions below to install certbot on your local machine or server.</p>
</div>
<div class="sect2">
<h3 id="install-certbot-on-macos">Install certbot on MacOS</h3>
<div class="paragraph">
<p>You can install certbot using Homebrew. Run the following command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>brew <span class="nb">install </span>certbot</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="obtain-challenge-tokens">Obtain Challenge Tokens</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To obtain SSL certificates from Let&#8217;s Encrypt, you need to complete a domain validation process. This typically involves creating DNS TXT records or serving HTTP challenge files.</p>
</div>
<div class="paragraph">
<p>Follow the instructions provided by certbot to obtain the necessary challenge tokens for your domain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>certbot certonly <span class="nt">--manual</span> <span class="nt">--preferred-challenges</span> dns <span class="nt">-d</span> yourdomain.com <span class="nt">-d</span> <span class="k">*</span>.yourdomain.com <span class="nt">--config-dir</span> ./certbot <span class="nt">--work-dir</span> ./certbot <span class="nt">--logs-dir</span> ./certbot

Enter email address or hit Enter to skip.: your-email

<span class="c">#$ certbot certonly --manual --preferred-challenges dns -d servicefoundry.ca -d *.servicefoundry.ca</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Saving debug log to /Users/young/Dev/alexamy/service-foundry/documents/sso-foundry/self-signed-certificate/letsencrypt.log
Requesting a certificate for servicefoundry.ca and *.servicefoundry.ca

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please deploy a DNS TXT record under the name:

_acme-challenge.servicefoundry.ca.

with the following value:

6tkFowyqJ78MQBvjbLUJ2JdfhVDrCh1CpPaBsDkmIOI

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Press Enter to Continue

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please deploy a DNS TXT record under the name:

_acme-challenge.servicefoundry.ca.

with the following value:

LXi9Tz8blGxN5v_wfdw000CeWl6SLs3gKyEx35PxEjY

(This must be set up in addition to the previous challenges; do not remove,
replace, or undo the previous challenge tasks yet. Note that you might be
asked to create multiple distinct TXT records with the same name. This is
permitted by DNS standards.)

Before continuing, verify the TXT record has been deployed. Depending on the DNS
provider, this may take some time, from a few seconds to multiple minutes. You can
check if it has finished deploying with aid of online tools, such as the Google
Admin Toolbox: https://toolbox.googleapps.com/apps/dig/#TXT/_acme-challenge.servicefoundry.ca.
Look for one or more bolded line(s) below the line ';ANSWER'. It should show the
value(s) you've just added.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Press Enter to Continue

Successfully received certificate.
Certificate is saved at: /Users/young/Dev/alexamy/service-foundry/documents/sso-foundry/self-signed-certificate/live/servicefoundry.ca/fullchain.pem
Key is saved at:         /Users/young/Dev/alexamy/service-foundry/documents/sso-foundry/self-signed-certificate/live/servicefoundry.ca/privkey.pem
This certificate expires on 2026-01-29.
These files will be updated when the certificate renews.

NEXT STEPS:
- This certificate will not be renewed automatically. Autorenewal of --manual certificates requires the use of an authentication hook script (--manual-auth-hook) but one was not provided. To renew this certificate, repeat this same certbot command before the certificate's expiry date.

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</pre>
</div>
</div>
<div class="paragraph">
<p>Move to Go Daddy, Domain &gt; DNS, Click Add New Record,
Type: TXT
Name: _acme-challenge
Value: 201CZ97t__Ey652QQLuXoKtdpnMSSfgh-Re9-GjF55M
TTL: 1/2 Hour</p>
</div>
<div class="paragraph">
<p>And click Save.</p>
</div>
<div class="paragraph">
<p>The same for the second token.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://letsencrypt.org/getting-started/" class="bare">https://letsencrypt.org/getting-started/</a></p>
</li>
<li>
<p><a href="https://certbot.eff.org/hosting_providers" class="bare">https://certbot.eff.org/hosting_providers</a></p>
</li>
<li>
<p><a href="https://certbot.eff.org/" class="bare">https://certbot.eff.org/</a></p>
</li>
</ul>
</div>
</div>
</div>
</body>
</html>