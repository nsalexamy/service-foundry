<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enable TLS/SSL with Let&#8217;s Encrypt</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#dns-configuration">DNS Configuration</a></li>
<li><a href="#clusterissuer">ClusterIssuer</a></li>
<li><a href="#create-a-certificate-resource">Create a Certificate resource</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="dns-configuration">DNS Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type: A
Name: @
Value: WebsiteBuilder Site
TTL: 1 Hour</p>
</div>
<div class="paragraph">
<p>Value: &lt;IP_ADDRESS_OF_YOUR_LOAD_BALANCER&gt;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clusterissuer">ClusterIssuer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, create a ClusterIssuer resource for the CA-based certificates.</p>
</div>
<div class="listingblock">
<div class="title">clusterissuer-letsencrypt-http.yaml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="s">Unresolved directive in index.adoc - include::clusterissuer-letsencrypt-http.yaml[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the ClusterIssuer resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> clusterissuer-letsencrypt-http.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>It generates TLS private key in the secret <code>letsencrypt-http-private-key</code> in the <code>cert-manager</code> namespace.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-certificate-resource">Create a Certificate resource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, create a Certificate resource to request a TLS certificate for your domain.</p>
</div>
<div class="listingblock">
<div class="title">certificate-servicefoundry.yaml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="s">Unresolved directive in index.adoc - include::certificate-servicefoundry.yaml[]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Apply the Certificate resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> certificate-servicefoundry.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a TLS certificate for <code>servicefoundry.ca</code> and <code>*.servicefoundry.ca</code>, stored in the secret <code>servicefoundry-tls</code> in the <code>cert-manager</code> namespace.</p>
</div>
</div>
</div>
</body>
</html>