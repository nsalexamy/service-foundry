<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apache Airflow - Using Azure Blob Storage</title>
    <!-- rouge source highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/service-foundry/pages/assets/css/main.css">

    <!-- Highlight.js script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</head>
<body class="">

<!-- Header -->
<header>
<!--    <div class="logo text-xl font-semibold">Service Foundry</div>-->
    <a href="/service-foundry/pages/index.html" class="text-2xl font-semibold hover:text-teal-400">
    Service Foundry
</a>
    <nav>
    
        
        <a href="/service-foundry/pages/getting-started/" class="">Getting Started</a>
    
        
        <a href="/service-foundry/pages/products/" class="">Products</a>
    
        
        <a href="/service-foundry/pages/documents/" class="active">Docs</a>
    
        
        <a href="/service-foundry/pages/github/" class="">GitHub</a>
    
        
        <a href="/service-foundry/pages/developers/" class="">Developers</a>
    
        
        <a href="/service-foundry/pages/demo/" class="">Demo</a>
    
</nav>
</header>


    <!-- Sub-navigation for Foundries -->
    <div class="subnav">

    
    <a href="/service-foundry/pages/documents/service-foundry/" class="">Service Foundry</a>

    
    <a href="/service-foundry/pages/documents/blog/" class="">Blog</a>

    
    <a href="/service-foundry/pages/documents/infra-foundry/" class="">Infra</a>

    
    <a href="/service-foundry/pages/documents/sso-foundry/" class="">SSO</a>

    
    <a href="/service-foundry/pages/documents/o11y-foundry/" class="">Observability</a>

    
    <a href="/service-foundry/pages/documents/backend-foundry/" class="">Backend</a>

    
    <a href="/service-foundry/pages/documents/bigdata-foundry/" class="active">Big Data</a>

<!--    <a href="/service-foundry/pages/documents/infra-foundry/index-backup.html" class="text-gray-300 hover:text-white">Infra</a>-->
<!--    <a href="/service-foundry/pages/documents/sso-foundry/index-backup.html" class="text-gray-300 hover:text-white">SSO</a>-->
<!--    <a href="/service-foundry/pages/documents/o11y-foundry/index-backup.html" class="text-gray-300 hover:text-white">Observability</a>-->
<!--    <a href="/service-foundry/pages/documents/backend-foundry/index-backup.html" class="text-gray-300 hover:text-white">Backend</a>-->
<!--    <a href="/service-foundry/pages/documents/bigdata-foundry/index-backup.html" class="text-gray-300 hover:text-white">Big Data</a>-->
</div>





<!-- Breadcrumb -->

    <nav class="breadcrumb-wrapper">
    <ol class="breadcrumb">
        
        <li>
            
            <a href="/service-foundry/pages/">Home</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/">Docs</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/bigdata-foundry/">BigData Foundry</a>
            
            
        </li>
        
    </ol>
</nav>





<!-- Main Layout -->
<div class="container">


    <nav id="toc-container" class="toc-nav"></nav>


    <main id="main-content">
        
        <div class="author-box">
            Young Gyu Kim
            &lt;<a href="mailto:credemol@gmail.com" style="color: #0d9488; text-decoration: none;">credemol@gmail.com</a>&gt;
        </div>
        

        <!-- Title -->
        
        <h1 class="page-title">
            Apache Airflow - Using Azure Blob Storage
        </h1>
        

        <div class="asciidoc">
            <div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#limitation-of-this-article">Limitation of this article</a></li>
</ul>
</li>
<li><a href="#set-up-azure-blob-storage-connection">Set up Azure Blob Storage Connection</a>
<ul class="sectlevel2">
<li><a href="#wasb-is-deprecated">WASB is deprecated</a></li>
<li><a href="#create-a-connection">Create a Connection</a></li>
<li><a href="#references-for-azure-blob-storage">References for Azure Blob Storage</a></li>
</ul>
</li>
<li><a href="#pandas-abfs-example-py">pandas-abfs-example.py</a>
<ul class="sectlevel2">
<li><a href="#save_file-function">save_file function</a></li>
<li><a href="#read_file-function">read_file function</a></li>
<li><a href="#xcoms">XComs</a></li>
</ul>
</li>
<li><a href="#duckdb-abfs-example-py">duckdb-abfs-example.py</a>
<ul class="sectlevel2">
<li><a href="#customized-base-docker-image-for-duckdb">Customized Base Docker Image for DuckDB</a></li>
<li><a href="#duckdb-abfs-example-py-2">duckdb-abfs-example.py</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#appendix">Appendix</a>
<ul class="sectlevel2">
<li><a href="#python-package-list-2_9_3">Python libraries included in the Docker image of Apache Airflow 2.9.3</a></li>
<li><a href="#python-package-list-2_10_3">Python libraries included in the Docker image of Apache Airflow 2.10.3</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock img-wide">
<div class="content">
<img src="images/apache-airflow-azure-blob-storage.png" alt="apache airflow azure blob storage">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This article is part of the series on Airflow on Kubernetes. In this series, we will cover the following topics:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://www.linkedin.com/pulse/apache-airflow-kubernetes-executor-young-gyu-kim-brenc/">Apache Airflow - Kubernetes Executor</a></p>
</li>
<li>
<p><a href="https://www.linkedin.com/pulse/apache-airflow-kubernetes-pod-operator-young-gyu-kim-m75fc/">Apache Airflow - Kubernetes Pod Operator</a></p>
</li>
<li>
<p><a href="https://www.linkedin.com/pulse/apache-airflow-using-azure-blob-storage-young-gyu-kim-dkvic">Apache Airflow - Using Azure Blob Storage</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is the third article in the series.</p>
</div>
<div class="paragraph">
<p>In this article, we’ll dive into using Azure Blob Storage with Apache Airflow.</p>
</div>
<div class="paragraph">
<p>We’ll create two DAGs to showcase different approaches:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pandas-abfs-example.py: Demonstrates reading from and writing to Azure Blob Storage using Pandas DataFrames.</p>
</li>
<li>
<p>duckdb-abfs-example.py: Highlights reading data from Azure Blob Storage with DuckDB.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="limitation-of-this-article">Limitation of this article</h3>
<div class="paragraph">
<p>In this article, we will not cover the cases when using Custom Docker Image with the Kubernetes Pod Operator. For those cases, it is recommended to use libraries provided by Azure SDK for your programming language.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="set-up-azure-blob-storage-connection">Set up Azure Blob Storage Connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use Azure Blob Storage in Apache Airflow, we need to set up the connection to Azure Blob Storage.</p>
</div>
<div class="sect2">
<h3 id="wasb-is-deprecated">WASB is deprecated</h3>
<div class="paragraph">
<p>Some documents online may refer to the Windows Azure Storage Blob driver (WASB) for Azure Blob Storage. However, wasb::// protocol is deprecated.</p>
</div>
<div class="paragraph">
<p>Now the protocols below are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abfs</p>
</li>
<li>
<p>abfss</p>
</li>
<li>
<p>adl</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Microsoft has deprecated the Windows Azure Storage Blob driver (WASB) for Azure Blob Storage in favor of the Azure Blob Filesystem driver (ABFS)</p>
</div>
<div class="paragraph">
<p>For more information on the deprecation of WASB, refer to the link:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/apache/airflow/issues/28223" class="bare">https://github.com/apache/airflow/issues/28223</a></p>
</div>
</div>
<div class="sect2">
<h3 id="create-a-connection">Create a Connection</h3>
<div class="paragraph">
<p>To create a connection to Azure Blob Storage, run the main menu &#8594; Admin &#8594; Connections &#8594; Create.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/wasb-connection-add-1.png" alt="wasb connection add 1">
</div>
<div class="title">Figure 1. Admin/Connection menu</div>
</div>
<div class="paragraph">
<p>Fill in the following fields:
* Connection ID: az_blob_storage (or any name you want)
* Connection Type: Azure Blob Storage
* Blob Storage Connection String (optional): Connection string for Azure Blob Storage</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/wasb-connection-add-2.png" alt="wasb connection add 2">
</div>
<div class="title">Figure 2. Azure Blob Storage Connection - Form Fields 1/2</div>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/wasb-connection-add-3.png" alt="wasb connection add 3">
</div>
<div class="title">Figure 3. Azure Blob Storage Connection - Form Fields 2/2</div>
</div>
<div class="sect3">
<h4 id="connection-id">Connection ID</h4>
<div class="paragraph">
<p>For most cases, the Connection ID has nothing to do with the actual connection. It is just a name for the connection. But in the example of DuckDB, the Connection ID is used to get the container name of Azure Blob Storage. So, we are going to create a new Azure Blob Storage connection with the Connection ID of <code>my-storage</code> later.</p>
</div>
</div>
<div class="sect3">
<h4 id="connection-string">Connection String</h4>
<div class="paragraph">
<p>For some reason, among security options, only the connection string works for the Azure Blob Storage connection. No need to set Blog Storage Login(account name) because the connection string includes the account name.</p>
</div>
<div class="paragraph">
<p>You can generate the connection string from the Azure Portal.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/wasb-connection-string-internal.png" alt="wasb connection string internal">
</div>
<div class="title">Figure 4. Azure Portal - Generate Connection String</div>
</div>
<div class="paragraph">
<p>Please note that the connection string has its expiration date. So, you need to regenerate the connection string when it expires.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="references-for-azure-blob-storage">References for Azure Blob Storage</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/apache/airflow/issues/28223" class="bare">https://github.com/apache/airflow/issues/28223</a></p>
</li>
<li>
<p><a href="https://www.astronomer.io/docs/learn/connections/azure-blob-storage/?tab=shared-access-key#azure-blob-storage" class="bare">https://www.astronomer.io/docs/learn/connections/azure-blob-storage/?tab=shared-access-key#azure-blob-storage</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/3.6.0/connections/wasb.html" class="bare">https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/3.6.0/connections/wasb.html</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/10.3.0/_api/airflow/providers/microsoft/azure/fs/adls/index.html" class="bare">https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/10.3.0/_api/airflow/providers/microsoft/azure/fs/adls/index.html</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/10.3.0/_modules/airflow/providers/microsoft/azure/fs/adls.html#get_fs" class="bare">https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/10.3.0/_modules/airflow/providers/microsoft/azure/fs/adls.html#get_fs</a></p>
</li>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/stable/_modules/airflow/providers/microsoft/azure/utils.html#get_field" class="bare">https://airflow.apache.org/docs/apache-airflow-providers-microsoft-azure/stable/_modules/airflow/providers/microsoft/azure/utils.html#get_field</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pandas-abfs-example-py">pandas-abfs-example.py</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We are going to create a simple DAG having 2 tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>task1 - read JSON data from hard coded data and write it to Azure Blob Storage using Pandas DataFrame.</p>
</li>
<li>
<p>task2 - read JSON data from Azure Blob Storage and write it to the log.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Even though the two tasks runs on a different pod, we can share the path of the file using XCom.</p>
</div>
<div class="listingblock">
<div class="title">dags/pandas-abfs-example.py</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">pendulum</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">from</span> <span class="n">airflow.decorators</span> <span class="kn">import</span> <span class="n">dag</span><span class="p">,</span> <span class="n">task</span>
<span class="kn">from</span> <span class="n">airflow.io.path</span> <span class="kn">import</span> <span class="n">ObjectStoragePath</span>


<span class="nd">@dag</span><span class="p">(</span>
    <span class="n">schedule</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="n">pendulum</span><span class="p">.</span><span class="nf">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sh">"</span><span class="s">UTC</span><span class="sh">"</span><span class="p">),</span>
    <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">panadas</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">abfs</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">azure_blob_storage</span><span class="sh">"</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">pandas_abfs_example</span><span class="p">():</span>


    <span class="nd">@task</span>
    <span class="k">def</span> <span class="nf">save_file</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ObjectStoragePath</span><span class="p">:</span>
        <span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

        <span class="n">base</span> <span class="o">=</span> <span class="nc">ObjectStoragePath</span><span class="p">(</span><span class="sh">"</span><span class="s">abfs://my-storage</span><span class="sh">"</span><span class="p">,</span> <span class="n">conn_id</span><span class="o">=</span><span class="sh">"</span><span class="s">az_blob_storage</span><span class="sh">"</span><span class="p">)</span>

        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Saving file to Azure Blob Storage</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">base: </span><span class="sh">"</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>

        <span class="n">data_string</span> <span class="o">=</span> <span class="sh">'</span><span class="s">{</span><span class="sh">"</span><span class="s">Courses</span><span class="sh">"</span><span class="s">:{</span><span class="sh">"</span><span class="s">r1</span><span class="sh">"</span><span class="s">:</span><span class="sh">"</span><span class="s">Spark</span><span class="sh">"</span><span class="s">},</span><span class="sh">"</span><span class="s">Fee</span><span class="sh">"</span><span class="s">:{</span><span class="sh">"</span><span class="s">r1</span><span class="sh">"</span><span class="s">:</span><span class="sh">"</span><span class="s">25000</span><span class="sh">"</span><span class="s">},</span><span class="sh">"</span><span class="s">Duration</span><span class="sh">"</span><span class="s">:{</span><span class="sh">"</span><span class="s">r1</span><span class="sh">"</span><span class="s">:</span><span class="sh">"</span><span class="s">50 Days</span><span class="sh">"</span><span class="s">}}</span><span class="sh">'</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_json</span><span class="p">(</span><span class="n">data_string</span><span class="p">)</span>

        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">df: </span><span class="sh">"</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="sa">f</span><span class="sh">"</span><span class="s">pandas/data.json</span><span class="sh">"</span>

        <span class="k">with</span> <span class="n">path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
            <span class="n">df</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">path</span>

    <span class="nd">@task</span>
    <span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">ObjectStoragePath</span><span class="p">):</span>
        <span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>

        <span class="n">base</span> <span class="o">=</span> <span class="nc">ObjectStoragePath</span><span class="p">(</span><span class="sh">"</span><span class="s">abfs://my-storage</span><span class="sh">"</span><span class="p">,</span> <span class="n">conn_id</span><span class="o">=</span><span class="sh">"</span><span class="s">az_blob_storage</span><span class="sh">"</span><span class="p">)</span>

        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Reading file from Azure Blob Storage</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">path: </span><span class="sh">"</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">path</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">df: </span><span class="sh">"</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>



    <span class="n">path</span> <span class="o">=</span> <span class="nf">save_file</span><span class="p">()</span>
    <span class="nf">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>



<span class="nf">pandas_abfs_example</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="save_file-function">save_file function</h3>
<div class="paragraph">
<p>In the DAG, we are going to use the <code>ObjectStoragePath</code> class to create the path for Azure Blob Storage.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python">        <span class="n">base</span> <span class="o">=</span> <span class="nc">ObjectStoragePath</span><span class="p">(</span><span class="sh">"</span><span class="s">abfs://my-storage</span><span class="sh">"</span><span class="p">,</span> <span class="n">conn_id</span><span class="o">=</span><span class="sh">"</span><span class="s">az_blob_storage</span><span class="sh">"</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>'my-storage' is the container name of Azure Blob Storage. You can get the container name from the Azure Portal.</p>
</div>
<div class="paragraph">
<p>And path is created by adding the container name and the file name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="n">path</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="sa">f</span><span class="sh">"</span><span class="s">pandas/data.json</span><span class="sh">"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the save_file function, we are going to save the file to Azure Blob Storage. And we can see the data.json file in Azure Blob Storage.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/pandas-abfs-1.png" alt="pandas abfs 1">
</div>
<div class="title">Figure 5. Azure Blob Storage - data.json file</div>
</div>
</div>
<div class="sect2">
<h3 id="read_file-function">read_file function</h3>
<div class="paragraph">
<p>As the parameter of the read_file function, we are going to use the path of the file that is saved in the save_file function. It is shared using XCom. Each task running on a different pod can share the data using XCom. The size of the data shared using XCom is limited. So, it is not recommended to share large data like Pandas DataFrame or Spark DataFrame.</p>
</div>
</div>
<div class="sect2">
<h3 id="xcoms">XComs</h3>
<div class="paragraph">
<p>We can see the data shared using XCom in the Airflow UI.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/pandas-abfs-xcom.png" alt="pandas abfs xcom">
</div>
<div class="title">Figure 6. Airflow UI - XCom</div>
</div>
<div class="paragraph">
<p>For more information on XComs, refer to the link:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://airflow.apache.org/docs/apache-airflow/stable/core-concepts/xcoms.html" class="bare">https://airflow.apache.org/docs/apache-airflow/stable/core-concepts/xcoms.html</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since the 'pandas' package is included in the default Docker image of Apache Airflow, we can use the 'pandas' package in the Airflow task without any additional installation. However, if you need to use other packages, you need to create a custom Docker image.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="duckdb-abfs-example-py">duckdb-abfs-example.py</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The duckdb package is not included in the default Docker image of Apache Airflow. So, we need to create a custom Docker image.</p>
</div>
<div class="sect2">
<h3 id="customized-base-docker-image-for-duckdb">Customized Base Docker Image for DuckDB</h3>
<div class="paragraph">
<p>This docker image is the base image that is used for all Airflow tasks.</p>
</div>
<div class="paragraph">
<p>For more information on python libraries included in the Docker image of Apache Airflow, refer to the <a href="#appendix">appendix</a>.</p>
</div>
<div class="listingblock">
<div class="title">docker/custom/Dockerfile</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="docker"><span class="k">FROM</span><span class="s"> apache/airflow:2.10.3</span>

<span class="k">RUN </span>pip <span class="nb">install</span> <span class="nt">--no-cache-dir</span> <span class="nt">--upgrade</span> pip <span class="o">&amp;&amp;</span> <span class="se">\
</span>    pip <span class="nb">install</span> <span class="nt">--no-cache-dir</span> duckdb</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Dockerfile installs the 'duckdb' package. And you can add other packages that you need.</p>
</div>
<div class="paragraph">
<p>In order to use this Docker image as the base image for the Airflow task, we need to push this Docker image to the container registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>az acr build <span class="nt">--image</span> airflow-custom:2.10.3 <span class="nt">--registry</span> <span class="o">{</span>your-acr-name<span class="o">}</span> ./ docker/custom</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then, we need to update the values.yaml file to use this Docker image.</p>
</div>
<div class="listingblock">
<div class="title">custom-values.yaml</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">images</span><span class="pi">:</span>
  <span class="na">airflow</span><span class="pi">:</span>
    <span class="na">repository</span><span class="pi">:</span> <span class="pi">{</span><span class="nv">your-acr-name</span><span class="pi">}</span><span class="s">.azurecr.io/airflow-custom</span>
    <span class="na">tag</span><span class="pi">:</span> <span class="s">2.10.3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can use DuckDB in the Airflow task.</p>
</div>
</div>
<div class="sect2">
<h3 id="duckdb-abfs-example-py-2">duckdb-abfs-example.py</h3>
<div class="paragraph">
<p>We are going to create a simple DAG having 1 task:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>task1 - read Parquet data from Azure Blob Storage and analyze the data using DuckDB.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Parquet files used in this example are the same as the Parquet files used in the previous article. The Sling ETL task migrates data from the source database to Azure Blob Storage in Parquet format. In the previous article, we used a separate Docker image and used Sling configuration file to use Azure Blob Storage. In this article, we are going to use the Azure Blob Storage connection in Apache Airflow.</p>
</div>
<div class="listingblock">
<div class="title">dags/duckdb-abfs-example.py</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">import</span> <span class="n">pendulum</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">from</span> <span class="n">airflow.decorators</span> <span class="kn">import</span> <span class="n">dag</span><span class="p">,</span> <span class="n">task</span>
<span class="kn">from</span> <span class="n">airflow.io.path</span> <span class="kn">import</span> <span class="n">ObjectStoragePath</span>


<span class="nd">@dag</span><span class="p">(</span>
    <span class="n">schedule</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="n">pendulum</span><span class="p">.</span><span class="nf">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sh">"</span><span class="s">UTC</span><span class="sh">"</span><span class="p">),</span>
    <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">abfs</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">duckdb</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">azure_blob_storage</span><span class="sh">"</span><span class="p">],</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">duckdb_abfs_example</span><span class="p">():</span>

    <span class="nd">@task</span>
    <span class="k">def</span> <span class="nf">analyze_data</span><span class="p">():</span>
        <span class="sh">"""</span><span class="s"> Analyze
        This task will analyze the data from Azure Blob Storage
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Analyzing data from Azure Blob Storage</span><span class="sh">"</span><span class="p">)</span>

        <span class="kn">import</span> <span class="n">duckdb</span>

        <span class="n">base</span> <span class="o">=</span> <span class="nc">ObjectStoragePath</span><span class="p">(</span><span class="sh">"</span><span class="s">abfs://my-storage</span><span class="sh">"</span><span class="p">,</span> <span class="n">conn_id</span><span class="o">=</span><span class="sh">"</span><span class="s">my-storage</span><span class="sh">"</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">base</span> <span class="o">/</span> <span class="sh">"</span><span class="s">sling/2024-11-29/division/*.parquet</span><span class="sh">"</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">database</span><span class="o">=</span><span class="sh">"</span><span class="s">:memory:</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">conn</span><span class="p">.</span><span class="nf">register_filesystem</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="n">fs</span><span class="p">)</span>
        <span class="n">conn</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">CREATE OR REPLACE VIEW division AS SELECT * FROM read_parquet(</span><span class="sh">'</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="sh">'</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="sh">"</span><span class="s">SELECT COUNT(*) AS COUNT FROM division</span><span class="sh">"</span><span class="p">).</span><span class="nf">fetchdf</span><span class="p">()</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

        <span class="n">message</span> <span class="o">=</span> <span class="sh">"</span><span class="s">===&gt; The number of records in the division table is: </span><span class="sh">"</span> <span class="o">+</span> <span class="nf">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="sh">"</span><span class="s">COUNT</span><span class="sh">"</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


    <span class="nf">analyze_data</span><span class="p">()</span>

    <span class="c1"># azure_task &gt;&gt; analyze_task
</span>
<span class="nf">duckdb_abfs_example</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In analyze_date function, we are using Azure Blob Storage to read Parquet files and analyze the data using DuckDB.</p>
</div>
<div class="paragraph">
<p>But DuckDB treats ObjectStoragePath in a different way. While Pandas get container name from the ObjectStoragePath, DuckDB gets the container name from the Connection ID.</p>
</div>
<div class="paragraph">
<p>So we need to create a new Azure Blob Storage connection with the Connection ID of <code>my-storage</code>.</p>
</div>
<div class="paragraph">
<p>I used the same information as the Pandas example but with a different Connection ID.</p>
</div>
<div class="paragraph">
<p>After executing the DAG, we can see the result of the DuckDB query in the log.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/duckdb-results-1.png" alt="duckdb results 1">
</div>
<div class="title">Figure 7. duckdb-abfs-example.py - result</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this article, we explored how to work with Azure Blob Storage in Apache Airflow. We created two DAGs to demonstrate the use of Pandas DataFrames and DuckDB with Azure Blob Storage. Additionally, we learned how to share data between tasks using XCom and how to build a custom Docker image to include the DuckDB package for use in Airflow tasks.</p>
</div>
<div class="paragraph">
<p>All my LinkedIn articles are available at <a href="https://www.linkedin.com/pulse/my-linkedin-article-library-young-gyu-kim-2jihc/">My LinkedIn Article Library</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix">Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="python-package-list-2_9_3">Python libraries included in the Docker image of Apache Airflow 2.9.3</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>pip list

Package                                  Version
<span class="nt">----------------------------------------</span> <span class="nt">---------------</span>
adal                                     1.2.7
adlfs                                    2024.4.1
aiobotocore                              2.13.1
aiofiles                                 23.2.1
aiohttp                                  3.9.5
aioitertools                             0.11.0
aiosignal                                1.3.1
alembic                                  1.13.2
amqp                                     5.2.0
annotated-types                          0.7.0
anyio                                    4.4.0
apache-airflow                           2.9.3
apache-airflow-providers-amazon          8.25.0
apache-airflow-providers-celery          3.7.2
apache-airflow-providers-cncf-kubernetes 8.3.3
apache-airflow-providers-common-io       1.3.2
apache-airflow-providers-common-sql      1.14.2
apache-airflow-providers-docker          3.12.2
apache-airflow-providers-elasticsearch   5.4.1
apache-airflow-providers-fab             1.2.2
apache-airflow-providers-ftp             3.10.0
apache-airflow-providers-google          10.21.0
apache-airflow-providers-grpc            3.5.2
apache-airflow-providers-hashicorp       3.7.1
apache-airflow-providers-http            4.12.0
apache-airflow-providers-imap            3.6.1
apache-airflow-providers-microsoft-azure 10.2.0
apache-airflow-providers-mysql           5.6.2
apache-airflow-providers-odbc            4.6.2
apache-airflow-providers-openlineage     1.9.1
apache-airflow-providers-postgres        5.11.2
apache-airflow-providers-redis           3.7.1
apache-airflow-providers-sendgrid        3.5.1
apache-airflow-providers-sftp            4.10.2
apache-airflow-providers-slack           8.7.1
apache-airflow-providers-smtp            1.7.1
apache-airflow-providers-snowflake       5.6.0
apache-airflow-providers-sqlite          3.8.1
apache-airflow-providers-ssh             3.11.2
apispec                                  6.6.1
argcomplete                              3.4.0
asgiref                                  3.8.1
asn1crypto                               1.5.1
asyncssh                                 2.15.0
attrs                                    23.2.0
Authlib                                  1.3.1
azure-batch                              14.2.0
azure-common                             1.1.28
azure-core                               1.30.2
azure-cosmos                             4.7.0
azure-datalake-store                     0.0.53
azure-identity                           1.17.1
azure-keyvault-secrets                   4.8.0
azure-kusto-data                         4.5.1
azure-mgmt-containerinstance             10.1.0
azure-mgmt-containerregistry             10.3.0
azure-mgmt-core                          1.4.0
azure-mgmt-cosmosdb                      9.5.1
azure-mgmt-datafactory                   8.0.0
azure-mgmt-datalake-nspkg                3.0.1
azure-mgmt-datalake-store                0.5.0
azure-mgmt-nspkg                         3.0.2
azure-mgmt-resource                      23.1.1
azure-mgmt-storage                       21.2.1
azure-nspkg                              3.0.2
azure-servicebus                         7.12.2
azure-storage-blob                       12.20.0
azure-storage-file-datalake              12.15.0
azure-storage-file-share                 12.16.0
azure-synapse-artifacts                  0.19.0
azure-synapse-spark                      0.7.0
Babel                                    2.15.0
backoff                                  2.2.1
bcrypt                                   4.1.3
beautifulsoup4                           4.12.3
billiard                                 4.2.0
blinker                                  1.8.2
boto3                                    1.34.131
botocore                                 1.34.131
cachelib                                 0.9.0
cachetools                               5.3.3
cattrs                                   23.2.3
celery                                   5.4.0
certifi                                  2024.7.4
cffi                                     1.16.0
chardet                                  5.2.0
charset-normalizer                       3.3.2
click                                    8.1.7
click-didyoumean                         0.3.1
click-plugins                            1.1.1
click-repl                               0.3.0
clickclick                               20.10.2
colorama                                 0.4.6
colorlog                                 4.8.0
ConfigUpdater                            3.2
connexion                                2.14.2
cron-descriptor                          1.4.3
croniter                                 2.0.5
cryptography                             41.0.7
db-dtypes                                1.2.0
decorator                                5.1.1
Deprecated                               1.2.14
dill                                     0.3.8
distlib                                  0.3.8
dnspython                                2.6.1
docker                                   7.1.0
docstring_parser                         0.16
docutils                                 0.16
elastic-transport                        8.13.1
elasticsearch                            8.14.0
email_validator                          2.2.0
eventlet                                 0.36.1
filelock                                 3.15.4
Flask                                    2.2.5
Flask-AppBuilder                         4.5.0
Flask-Babel                              2.0.0
Flask-Caching                            2.3.0
Flask-JWT-Extended                       4.6.0
Flask-Limiter                            3.7.0
Flask-Login                              0.6.3
Flask-Session                            0.5.0
Flask-SQLAlchemy                         2.5.1
Flask-WTF                                1.2.1
flower                                   2.0.1
frozenlist                               1.4.1
fsspec                                   2023.12.2
gcloud-aio-auth                          4.2.3
gcloud-aio-bigquery                      7.1.0
gcloud-aio-storage                       9.2.0
gcsfs                                    2023.12.2.post1
gevent                                   24.2.1
google-ads                               24.1.0
google-analytics-admin                   0.22.8
google-api-core                          2.19.1
google-api-python-client                 2.137.0
google-auth                              2.32.0
google-auth-httplib2                     0.2.0
google-auth-oauthlib                     1.2.1
google-cloud-aiplatform                  1.59.0
google-cloud-appengine-logging           1.4.4
google-cloud-audit-log                   0.2.5
google-cloud-automl                      2.13.4
google-cloud-batch                       0.17.22
google-cloud-bigquery                    3.20.1
google-cloud-bigquery-datatransfer       3.15.4
google-cloud-bigtable                    2.24.0
google-cloud-build                       3.24.1
google-cloud-compute                     1.19.1
google-cloud-container                   2.49.0
google-cloud-core                        2.4.1
google-cloud-datacatalog                 3.19.1
google-cloud-dataflow-client             0.8.11
google-cloud-dataform                    0.5.10
google-cloud-dataplex                    2.2.1
google-cloud-dataproc                    5.10.1
google-cloud-dataproc-metastore          1.15.4
google-cloud-dlp                         3.18.1
google-cloud-kms                         2.24.1
google-cloud-language                    2.13.4
google-cloud-logging                     3.10.0
google-cloud-memcache                    1.9.4
google-cloud-monitoring                  2.22.1
google-cloud-orchestration-airflow       1.13.0
google-cloud-os-login                    2.14.5
google-cloud-pubsub                      2.22.0
google-cloud-redis                       2.15.4
google-cloud-resource-manager            1.12.4
google-cloud-run                         0.10.7
google-cloud-secret-manager              2.20.1
google-cloud-spanner                     3.47.0
google-cloud-speech                      2.26.1
google-cloud-storage                     2.17.0
google-cloud-storage-transfer            1.11.4
google-cloud-tasks                       2.16.4
google-cloud-texttospeech                2.16.4
google-cloud-translate                   3.15.4
google-cloud-videointelligence           2.13.4
google-cloud-vision                      3.7.3
google-cloud-workflows                   1.14.4
google-crc32c                            1.5.0
google-re2                               1.1.20240702
google-resumable-media                   2.7.1
googleapis-common-protos                 1.63.2
graphviz                                 0.20.3
greenlet                                 3.0.3
grpc-google-iam-v1                       0.13.1
grpc-interceptor                         0.15.4
grpcio                                   1.64.1
grpcio-gcp                               0.2.2
grpcio-status                            1.62.2
gunicorn                                 22.0.0
h11                                      0.14.0
h2                                       4.1.0
hpack                                    4.0.0
httpcore                                 1.0.5
httplib2                                 0.22.0
httpx                                    0.27.0
humanize                                 4.10.0
hvac                                     2.3.0
hyperframe                               6.0.1
idna                                     3.7
ijson                                    3.3.0
importlib-metadata                       6.11.0
importlib_resources                      6.4.0
inflection                               0.5.1
isodate                                  0.6.1
itsdangerous                             2.2.0
Jinja2                                   3.1.4
jmespath                                 0.10.0
json-merge-patch                         0.2
jsonpath-ng                              1.6.1
jsonschema                               4.23.0
jsonschema-specifications                2023.12.1
kombu                                    5.3.7
kubernetes                               29.0.0
kubernetes_asyncio                       29.0.0
lazy-object-proxy                        1.10.0
ldap3                                    2.9.1
limits                                   3.13.0
linkify-it-py                            2.0.3
lockfile                                 0.12.2
looker-sdk                               24.10.0
lxml                                     5.2.2
Mako                                     1.3.5
markdown-it-py                           3.0.0
MarkupSafe                               2.1.5
marshmallow                              3.21.3
marshmallow-oneofschema                  3.1.1
marshmallow-sqlalchemy                   0.28.2
mdit-py-plugins                          0.4.1
mdurl                                    0.1.2
methodtools                              0.4.7
microsoft-kiota-abstractions             1.3.3
microsoft-kiota-authentication-azure     1.0.0
microsoft-kiota-http                     1.3.2
more-itertools                           10.3.0
msal                                     1.29.0
msal-extensions                          1.2.0
msgraph-core                             1.1.1
msrest                                   0.7.1
msrestazure                              0.6.4.post1
multidict                                6.0.5
mysql-connector-python                   9.0.0
mysqlclient                              2.2.4
numpy                                    1.26.4
oauthlib                                 3.2.2
openlineage-integration-common           1.18.0
openlineage-python                       1.18.0
openlineage_sql                          1.18.0
opentelemetry-api                        1.25.0
opentelemetry-exporter-otlp              1.25.0
opentelemetry-exporter-otlp-proto-common 1.25.0
opentelemetry-exporter-otlp-proto-grpc   1.25.0
opentelemetry-exporter-otlp-proto-http   1.25.0
opentelemetry-proto                      1.25.0
opentelemetry-sdk                        1.25.0
opentelemetry-semantic-conventions       0.46b0
ordered-set                              4.1.0
packaging                                24.1
pandas                                   2.1.4
pandas-gbq                               0.23.1
paramiko                                 3.4.0
pathspec                                 0.12.1
pendulum                                 3.0.0
pip                                      24.3.1
platformdirs                             4.2.2
pluggy                                   1.5.0
ply                                      3.11
portalocker                              2.10.0
prison                                   0.2.1
prometheus_client                        0.20.0
prompt_toolkit                           3.0.47
proto-plus                               1.24.0
protobuf                                 4.25.3
psutil                                   6.0.0
psycopg2-binary                          2.9.9
pyarrow                                  16.1.0
pyasn1                                   0.5.1
pyasn1-modules                           0.3.0
PyAthena                                 3.8.3
pycparser                                2.22
pydantic                                 2.8.2
pydantic_core                            2.20.1
pydata-google-auth                       1.8.2
Pygments                                 2.18.0
PyJWT                                    2.8.0
PyNaCl                                   1.5.0
pyodbc                                   5.1.0
pyOpenSSL                                24.1.0
pyparsing                                3.1.2
python-daemon                            3.0.1
python-dateutil                          2.9.0.post0
python-dotenv                            1.0.1
python-http-client                       3.3.7
python-ldap                              3.4.4
python-nvd3                              0.16.0
python-slugify                           8.0.4
pytz                                     2024.1
PyYAML                                   6.0.1
redis                                    5.0.7
redshift-connector                       2.1.2
referencing                              0.35.1
requests                                 2.32.3
requests-oauthlib                        1.3.1
requests-toolbelt                        1.0.0
rfc3339-validator                        0.1.4
rich                                     13.7.1
rich-argparse                            1.5.2
rpds-py                                  0.19.0
rsa                                      4.9
s3transfer                               0.10.2
scramp                                   1.4.5
sendgrid                                 6.11.0
setproctitle                             1.3.3
setuptools                               66.1.1
shapely                                  2.0.4
six                                      1.16.0
slack_sdk                                3.31.0
sniffio                                  1.3.1
snowflake-connector-python               3.11.0
snowflake-sqlalchemy                     1.6.1
sortedcontainers                         2.4.0
soupsieve                                2.5
SQLAlchemy                               1.4.52
sqlalchemy-bigquery                      1.11.0
SQLAlchemy-JSONField                     1.0.2
sqlalchemy-redshift                      0.8.14
sqlalchemy-spanner                       1.7.0
SQLAlchemy-Utils                         0.41.2
sqlparse                                 0.5.0
sshtunnel                                0.4.0
starkbank-ecdsa                          2.2.0
statsd                                   4.0.1
std-uritemplate                          1.0.3
tabulate                                 0.9.0
tenacity                                 8.5.0
termcolor                                2.4.0
text-unidecode                           1.3
time-machine                             2.14.2
tomlkit                                  0.13.0
tornado                                  6.4.1
typing_extensions                        4.12.2
tzdata                                   2024.1
uc-micro-py                              1.0.3
unicodecsv                               0.14.1
universal_pathlib                        0.2.2
uritemplate                              4.1.1
urllib3                                  2.0.7
uv                                       0.2.31
vine                                     5.1.0
virtualenv                               20.26.3
watchtower                               3.2.0
wcwidth                                  0.2.13
websocket-client                         1.8.0
Werkzeug                                 2.2.3
wirerope                                 0.4.7
wrapt                                    1.16.0
WTForms                                  3.1.2
yarl                                     1.9.4
zipp                                     3.19.2
zope.event                               5.0
zope.interface                           6.4.post2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="python-package-list-2_10_3">Python libraries included in the Docker image of Apache Airflow 2.10.3</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>pip list

Package                                  Version
<span class="nt">----------------------------------------</span> <span class="nt">------------</span>
adal                                     1.2.7
adlfs                                    2024.7.0
aiobotocore                              2.15.2
aiofiles                                 23.2.1
aiohappyeyeballs                         2.4.3
aiohttp                                  3.10.10
aioitertools                             0.12.0
aiosignal                                1.3.1
alembic                                  1.14.0
amqp                                     5.2.0
annotated-types                          0.7.0
anyio                                    4.6.2.post1
apache-airflow                           2.10.3
apache-airflow-providers-amazon          9.0.0
apache-airflow-providers-celery          3.8.3
apache-airflow-providers-cncf-kubernetes 9.0.1
apache-airflow-providers-common-compat   1.2.1
apache-airflow-providers-common-io       1.4.2
apache-airflow-providers-common-sql      1.19.0
apache-airflow-providers-docker          3.14.0
apache-airflow-providers-elasticsearch   5.5.2
apache-airflow-providers-fab             1.5.0
apache-airflow-providers-ftp             3.11.1
apache-airflow-providers-google          10.25.0
apache-airflow-providers-grpc            3.6.0
apache-airflow-providers-hashicorp       3.8.0
apache-airflow-providers-http            4.13.2
apache-airflow-providers-imap            3.7.0
apache-airflow-providers-microsoft-azure 11.0.0
apache-airflow-providers-mysql           5.7.3
apache-airflow-providers-odbc            4.8.0
apache-airflow-providers-openlineage     1.13.0
apache-airflow-providers-postgres        5.13.1
apache-airflow-providers-redis           3.8.0
apache-airflow-providers-sendgrid        3.6.0
apache-airflow-providers-sftp            4.11.1
apache-airflow-providers-slack           8.9.1
apache-airflow-providers-smtp            1.8.0
apache-airflow-providers-snowflake       5.8.0
apache-airflow-providers-sqlite          3.9.0
apache-airflow-providers-ssh             3.14.0
apispec                                  6.7.1
argcomplete                              3.5.1
asgiref                                  3.8.1
asn1crypto                               1.5.1
asyncssh                                 2.18.0
attrs                                    24.2.0
Authlib                                  1.3.2
azure-batch                              14.2.0
azure-common                             1.1.28
azure-core                               1.32.0
azure-cosmos                             4.7.0
azure-datalake-store                     0.0.53
azure-identity                           1.19.0
azure-keyvault-secrets                   4.9.0
azure-kusto-data                         4.6.1
azure-mgmt-containerinstance             10.1.0
azure-mgmt-containerregistry             10.3.0
azure-mgmt-core                          1.5.0
azure-mgmt-cosmosdb                      9.6.0
azure-mgmt-datafactory                   9.0.0
azure-mgmt-datalake-nspkg                3.0.1
azure-mgmt-datalake-store                0.5.0
azure-mgmt-nspkg                         3.0.2
azure-mgmt-resource                      23.2.0
azure-mgmt-storage                       21.2.1
azure-nspkg                              3.0.2
azure-servicebus                         7.12.3
azure-storage-blob                       12.23.1
azure-storage-file-datalake              12.17.0
azure-storage-file-share                 12.19.0
azure-synapse-artifacts                  0.19.0
azure-synapse-spark                      0.7.0
babel                                    2.16.0
backoff                                  2.2.1
bcrypt                                   4.2.0
beautifulsoup4                           4.12.3
billiard                                 4.2.1
blinker                                  1.8.2
boto3                                    1.35.36
botocore                                 1.35.36
cachelib                                 0.9.0
cachetools                               5.5.0
cattrs                                   24.1.2
celery                                   5.4.0
certifi                                  2024.8.30
cffi                                     1.17.1
chardet                                  5.2.0
charset-normalizer                       3.4.0
click                                    8.1.7
click-didyoumean                         0.3.1
click-plugins                            1.1.1
click-repl                               0.3.0
clickclick                               20.10.2
colorama                                 0.4.6
colorlog                                 6.9.0
ConfigUpdater                            3.2
connexion                                2.14.2
cron-descriptor                          1.4.5
croniter                                 5.0.1
cryptography                             42.0.8
db-dtypes                                1.3.0
decorator                                5.1.1
Deprecated                               1.2.14
dill                                     0.3.9
distlib                                  0.3.9
dnspython                                2.7.0
docker                                   7.1.0
docstring_parser                         0.16
elastic-transport                        8.15.1
elasticsearch                            8.15.1
email_validator                          2.2.0
eventlet                                 0.37.0
filelock                                 3.16.1
Flask                                    2.2.5
Flask-AppBuilder                         4.5.2
Flask-Babel                              2.0.0
Flask-Caching                            2.3.0
Flask-JWT-Extended                       4.6.0
Flask-Limiter                            3.8.0
Flask-Login                              0.6.3
Flask-Session                            0.5.0
Flask-SQLAlchemy                         2.5.1
Flask-WTF                                1.2.2
flower                                   2.0.1
frozenlist                               1.5.0
fsspec                                   2024.10.0
gcloud-aio-auth                          5.3.2
gcloud-aio-bigquery                      7.1.0
gcloud-aio-storage                       9.3.0
gcsfs                                    2024.10.0
gevent                                   24.10.3
google-ads                               25.1.0
google-analytics-admin                   0.23.2
google-api-core                          2.22.0
google-api-python-client                 2.151.0
google-auth                              2.35.0
google-auth-httplib2                     0.2.0
google-auth-oauthlib                     1.2.1
google-cloud-aiplatform                  1.71.1
google-cloud-appengine-logging           1.5.0
google-cloud-audit-log                   0.3.0
google-cloud-automl                      2.14.1
google-cloud-batch                       0.17.31
google-cloud-bigquery                    3.20.1
google-cloud-bigquery-datatransfer       3.17.1
google-cloud-bigtable                    2.26.0
google-cloud-build                       3.27.0
google-cloud-compute                     1.20.1
google-cloud-container                   2.53.0
google-cloud-core                        2.4.1
google-cloud-datacatalog                 3.21.1
google-cloud-dataflow-client             0.8.13
google-cloud-dataform                    0.5.13
google-cloud-dataplex                    2.3.1
google-cloud-dataproc                    5.15.1
google-cloud-dataproc-metastore          1.16.0
google-cloud-dlp                         3.25.0
google-cloud-kms                         3.1.0
google-cloud-language                    2.15.0
google-cloud-logging                     3.11.3
google-cloud-memcache                    1.10.0
google-cloud-monitoring                  2.23.0
google-cloud-orchestration-airflow       1.15.0
google-cloud-os-login                    2.15.0
google-cloud-pubsub                      2.26.1
google-cloud-redis                       2.16.0
google-cloud-resource-manager            1.13.0
google-cloud-run                         0.10.10
google-cloud-secret-manager              2.21.0
google-cloud-spanner                     3.49.1
google-cloud-speech                      2.28.0
google-cloud-storage                     2.18.2
google-cloud-storage-transfer            1.13.0
google-cloud-tasks                       2.17.0
google-cloud-texttospeech                2.21.0
google-cloud-translate                   3.17.0
google-cloud-videointelligence           2.14.0
google-cloud-vision                      3.8.0
google-cloud-workflows                   1.15.0
google-crc32c                            1.6.0
google-re2                               1.1.20240702
google-resumable-media                   2.7.2
googleapis-common-protos                 1.65.0
graphviz                                 0.20.3
greenlet                                 3.1.1
grpc-google-iam-v1                       0.13.1
grpc-interceptor                         0.15.4
grpcio                                   1.67.1
grpcio-gcp                               0.2.2
grpcio-status                            1.62.3
gunicorn                                 23.0.0
h11                                      0.14.0
h2                                       4.1.0
hpack                                    4.0.0
httpcore                                 1.0.6
httplib2                                 0.22.0
httpx                                    0.27.0
humanize                                 4.11.0
hvac                                     2.3.0
hyperframe                               6.0.1
idna                                     3.10
ijson                                    3.3.0
immutabledict                            4.2.0
importlib-metadata                       6.11.0
importlib_resources                      6.4.5
inflection                               0.5.1
isodate                                  0.7.2
itsdangerous                             2.2.0
Jinja2                                   3.1.4
jmespath                                 0.10.0
json-merge-patch                         0.2
jsonpath-ng                              1.7.0
jsonschema                               4.23.0
jsonschema-specifications                2023.12.1
kombu                                    5.4.2
kubernetes                               30.1.0
kubernetes_asyncio                       30.1.0
lazy-object-proxy                        1.10.0
ldap3                                    2.9.1
limits                                   3.13.0
linkify-it-py                            2.0.3
lockfile                                 0.12.2
looker-sdk                               24.18.1
lxml                                     5.3.0
Mako                                     1.3.6
markdown-it-py                           3.0.0
MarkupSafe                               3.0.2
marshmallow                              3.23.1
marshmallow-oneofschema                  3.1.1
marshmallow-sqlalchemy                   0.28.2
mdit-py-plugins                          0.4.2
mdurl                                    0.1.2
methodtools                              0.4.7
microsoft-kiota-abstractions             1.3.3
microsoft-kiota-authentication-azure     1.1.0
microsoft-kiota-http                     1.3.3
microsoft-kiota-serialization-json       1.0.0
microsoft-kiota-serialization-text       1.0.0
more-itertools                           10.5.0
msal                                     1.31.0
msal-extensions                          1.2.0
msgraph-core                             1.1.6
msrest                                   0.7.1
msrestazure                              0.6.4.post1
multidict                                6.1.0
mysql-connector-python                   9.1.0
mysqlclient                              2.2.5
numpy                                    1.26.4
oauthlib                                 3.2.2
openlineage-integration-common           1.23.0
openlineage-python                       1.23.0
openlineage_sql                          1.23.0
opentelemetry-api                        1.27.0
opentelemetry-exporter-otlp              1.27.0
opentelemetry-exporter-otlp-proto-common 1.27.0
opentelemetry-exporter-otlp-proto-grpc   1.27.0
opentelemetry-exporter-otlp-proto-http   1.27.0
opentelemetry-proto                      1.27.0
opentelemetry-sdk                        1.27.0
opentelemetry-semantic-conventions       0.48b0
ordered-set                              4.1.0
packaging                                24.1
pandas                                   2.1.4
pandas-gbq                               0.24.0
paramiko                                 3.5.0
pathspec                                 0.12.1
pendulum                                 3.0.0
pip                                      24.2
platformdirs                             4.3.6
pluggy                                   1.5.0
ply                                      3.11
portalocker                              2.10.1
prison                                   0.2.1
prometheus_client                        0.21.0
prompt_toolkit                           3.0.48
propcache                                0.2.0
proto-plus                               1.25.0
protobuf                                 4.25.5
psutil                                   6.1.0
psycopg2-binary                          2.9.10
pyarrow                                  18.0.0
pyasn1                                   0.6.1
pyasn1_modules                           0.4.0
PyAthena                                 3.9.0
pycparser                                2.22
pydantic                                 2.9.2
pydantic_core                            2.23.4
pydata-google-auth                       1.8.2
Pygments                                 2.18.0
PyJWT                                    2.9.0
PyNaCl                                   1.5.0
pyodbc                                   5.2.0
pyOpenSSL                                24.2.1
pyparsing                                3.2.0
python-daemon                            3.1.0
python-dateutil                          2.9.0.post0
python-dotenv                            1.0.1
python-http-client                       3.3.7
python-ldap                              3.4.4
python-nvd3                              0.16.0
python-slugify                           8.0.4
python3-saml                             1.16.0
pytz                                     2024.2
PyYAML                                   6.0.2
redis                                    5.2.0
redshift-connector                       2.1.3
referencing                              0.35.1
requests                                 2.32.3
requests-oauthlib                        1.3.1
requests-toolbelt                        1.0.0
rfc3339-validator                        0.1.4
rich                                     13.9.4
rich-argparse                            1.6.0
rpds-py                                  0.20.1
rsa                                      4.9
s3transfer                               0.10.3
scramp                                   1.4.5
sendgrid                                 6.11.0
setproctitle                             1.3.3
setuptools                               75.3.0
shapely                                  2.0.6
six                                      1.16.0
slack_sdk                                3.33.3
sniffio                                  1.3.1
snowflake-connector-python               3.12.3
snowflake-sqlalchemy                     1.6.1
sortedcontainers                         2.4.0
soupsieve                                2.6
SQLAlchemy                               1.4.54
sqlalchemy-bigquery                      1.12.0
SQLAlchemy-JSONField                     1.0.2
sqlalchemy-redshift                      0.8.14
sqlalchemy-spanner                       1.7.0
SQLAlchemy-Utils                         0.41.2
sqlparse                                 0.5.1
sshtunnel                                0.4.0
starkbank-ecdsa                          2.2.0
statsd                                   4.0.1
std-uritemplate                          2.0.0
tabulate                                 0.9.0
tenacity                                 8.5.0
termcolor                                2.5.0
text-unidecode                           1.3
time-machine                             2.16.0
tomlkit                                  0.13.2
tornado                                  6.4.1
typing_extensions                        4.12.2
tzdata                                   2024.2
uc-micro-py                              1.0.3
universal_pathlib                        0.2.5
uritemplate                              4.1.1
urllib3                                  2.2.3
uv                                       0.4.1
vine                                     5.1.0
virtualenv                               20.27.1
watchtower                               3.3.1
wcwidth                                  0.2.13
websocket-client                         1.8.0
Werkzeug                                 2.2.3
wirerope                                 0.4.7
wrapt                                    1.16.0
WTForms                                  3.2.1
xmlsec                                   1.3.14
yarl                                     1.17.1
zipp                                     3.20.2
zope.event                               5.0
zope.interface                           7.1.1</code></pre>
</div>
</div>
</div>
</div>
</div>
        </div>
    </main>
</div>




<script>
    const toc = document.getElementById('toc');
    const container = document.getElementById('toc-container');
    if (toc && container) {
        container.appendChild(toc);
    }
</script>


<!--<button onclick="toggleTheme()" style="position: fixed; bottom: 1rem; right: 1rem; padding: 0.5rem 1rem; background-color: var(&#45;&#45;link); color: white; border: none; border-radius: 0.375rem; cursor: pointer;">-->
<!--    Toggle Theme-->
<!--</button>-->

<!--<script>-->
<!--    function toggleTheme() {-->
<!--        const html = document.documentElement;-->
<!--        const isDark = html.getAttribute("data-theme") === "dark";-->
<!--        html.setAttribute("data-theme", isDark ? "light" : "dark");-->
<!--        localStorage.setItem("theme", isDark ? "light" : "dark");-->
<!--    }-->

<!--    document.addEventListener("DOMContentLoaded", () => {-->
<!--        const savedTheme = localStorage.getItem("theme") || "light";-->
<!--        document.documentElement.setAttribute("data-theme", savedTheme);-->
<!--    });-->
<!--</script>-->

<!-- Footer -->
<footer class="bg-gray-900 text-white text-sm py-6 text-center">
    © 2025 Service Foundry. All rights reserved.
</footer>
</body>
</html>