<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Service Foundry Installation Guide for AWS Users</title>
    <!-- rouge source highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/service-foundry/pages/assets/css/main.css">

    <!-- Highlight.js script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</head>
<body class="">

<!-- Header -->
<header>
<!--    <div class="logo text-xl font-semibold">Service Foundry</div>-->
    <a href="/service-foundry/pages/index.html" class="text-2xl font-semibold hover:text-teal-400">
    Service Foundry
</a>
    <nav>
    
        
        <a href="/service-foundry/pages/getting-started/" class="">Getting Started</a>
    
        
        <a href="/service-foundry/pages/products/" class="">Products</a>
    
        
        <a href="/service-foundry/pages/documents/" class="active">Docs</a>
    
        
        <a href="/service-foundry/pages/github/" class="">GitHub</a>
    
        
        <a href="/service-foundry/pages/developers/" class="">Developers</a>
    
        
        <a href="/service-foundry/pages/demo/" class="">Demo</a>
    
</nav>
</header>


    <!-- Sub-navigation for Foundries -->
    <div class="subnav">

    
    <a href="/service-foundry/pages/documents/service-foundry/" class="active">Service Foundry</a>

    
    <a href="/service-foundry/pages/documents/mlops-foundry/" class="">MLOps Foundry</a>

    
    <a href="/service-foundry/pages/documents/blog/" class="">Blog</a>

    
    <a href="/service-foundry/pages/documents/infra-foundry/" class="">Infra</a>

    
    <a href="/service-foundry/pages/documents/sso-foundry/" class="">SSO</a>

    
    <a href="/service-foundry/pages/documents/o11y-foundry/" class="">Observability</a>

    
    <a href="/service-foundry/pages/documents/backend-foundry/" class="">Backend</a>

    
    <a href="/service-foundry/pages/documents/bigdata-foundry/" class="">Big Data</a>

<!--    <a href="/service-foundry/pages/documents/infra-foundry/index-backup.html" class="text-gray-300 hover:text-white">Infra</a>-->
<!--    <a href="/service-foundry/pages/documents/sso-foundry/index-backup.html" class="text-gray-300 hover:text-white">SSO</a>-->
<!--    <a href="/service-foundry/pages/documents/o11y-foundry/index-backup.html" class="text-gray-300 hover:text-white">Observability</a>-->
<!--    <a href="/service-foundry/pages/documents/backend-foundry/index-backup.html" class="text-gray-300 hover:text-white">Backend</a>-->
<!--    <a href="/service-foundry/pages/documents/bigdata-foundry/index-backup.html" class="text-gray-300 hover:text-white">Big Data</a>-->
</div>





<!-- Breadcrumb -->

    <nav class="breadcrumb-wrapper">
    <ol class="breadcrumb">
        
        <li>
            
            <a href="/service-foundry/pages/">Home</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/">Docs</a>
            
            
            <span class="separator">/</span>
            
        </li>
        
        <li>
            
            <a href="/service-foundry/pages/documents/service-foundry/">Service Foundry</a>
            
            
        </li>
        
    </ol>
</nav>





<!-- Main Layout -->
<div class="container">


    <nav id="toc-container" class="toc-nav"></nav>


    <main id="main-content">
        
        <div class="author-box">
            Young Gyu Kim
            &lt;<a href="mailto:credemol@gmail.com" style="color: #0d9488; text-decoration: none;">credemol@gmail.com</a>&gt;
        </div>
        

        <!-- Title -->
        
        <h1 class="page-title">
            Service Foundry Installation Guide for AWS Users
        </h1>
        

        <div class="asciidoc">
            <div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li><a href="#steps-to-install-service-foundry-on-aws">Steps to Install Service Foundry on AWS</a></li>
<li><a href="#1-set-up-aws-cloud-shell">1. Set up AWS Cloud Shell</a>
<ul class="sectlevel2">
<li><a href="#install-cli-tools">Install CLI Tools</a></li>
<li><a href="#cloud-shell-storage">Cloud Shell Storage</a></li>
</ul>
</li>
<li><a href="#2-create-an-eks-cluster">2. Create an EKS Cluster</a></li>
<li><a href="#3-configure-kubectl-to-connect-to-the-eks-cluster">3. Configure kubectl to Connect to the EKS Cluster</a></li>
<li><a href="#4-create-a-github-repository-for-gitops">4. Create a GitHub Repository for GitOps</a></li>
<li><a href="#5-download-bootstrap-scripts-and-install-service-foundry">5. Download Bootstrap Scripts and Install Service Foundry</a>
<ul class="sectlevel2">
<li><a href="#create-a-community-edition-license-key">Create a Community Edition License Key</a></li>
<li><a href="#fill-out-the-form-to-download-bootstrap-scripts">Fill out the Form to Download Bootstrap Scripts</a></li>
<li><a href="#upload-the-bootstrap-script-zip-file-to-aws-cloud-shell">Upload the Bootstrap Script Zip File to AWS Cloud Shell</a></li>
<li><a href="#unzip-the-downloaded-file-in-aws-cloud-shell">Unzip the Downloaded File in AWS Cloud Shell</a></li>
<li><a href="#set-environment-variables">Set Environment Variables</a></li>
<li><a href="#run-the-bootstrap-script-to-install-service-foundry">Run the Bootstrap Script to Install Service Foundry</a></li>
</ul>
</li>
<li><a href="#6-dns-configuration-if-applicable">6. DNS Configuration (if applicable)</a></li>
<li><a href="#7-load-balancers">7. Load Balancers</a></li>
<li><a href="#8-access-service-foundry">8. Access Service Foundry</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide provides step-by-step instructions for installing Service Foundry on Amazon Web Services (AWS) using AWS Cloud Shell and an existing EKS cluster.</p>
</div>
<div class="sect2">
<h3 id="prerequisites">Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>An AWS account with necessary permissions to create and manage EKS clusters and related resources.</p>
</li>
<li>
<p>An existing EKS cluster. If you don&#8217;t have one, this guide includes steps to create one.</p>
</li>
<li>
<p>Basic knowledge of AWS Cloud Shell, Kubernetes, and Git.</p>
</li>
<li>
<p>A GitHub account to create a repository for GitOps.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="steps-to-install-service-foundry-on-aws">Steps to Install Service Foundry on AWS</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set up AWS Cloud Shell</p>
</li>
<li>
<p>Create an EKS Cluster(if not already created)</p>
</li>
<li>
<p>Configure kubectl to connect to the EKS Cluster</p>
</li>
<li>
<p>Create a GitHub Repository for GitOps and Configure SSH Access to GitHub Repository</p>
</li>
<li>
<p>Download Bootstrap Scripts for Service Foundry</p>
</li>
<li>
<p>Set Environment Variables</p>
</li>
<li>
<p>Run the Bootstrap Script to Install Service Foundry</p>
</li>
<li>
<p>DNS Configuration (if applicable)</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-set-up-aws-cloud-shell">1. Set up AWS Cloud Shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AWS Cloud Shell is a browser-based shell that provides you with command-line access to AWS resources. It comes pre-installed with essential tools like AWS CLI, kubectl, and Helm, making it easier to manage your AWS infrastructure.</p>
</div>
<div class="paragraph">
<p>For more information on AWS CloudShell, refer to documents below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nsalexamy.github.io/service-foundry/pages/documents/blog/aws-cloud-shell/">AWS Cloud Shell Setup Guide</a></p>
</li>
<li>
<p><a href="https://nsalexamy.github.io/service-foundry/pages/documents/blog/aws-cloud-shell/persist-custom-software-installations.html">Persist Custom Software Installations in AWS Cloud Shell</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="install-cli-tools">Install CLI Tools</h3>
<div class="ulist">
<ul>
<li>
<p>AWS CLI: Pre-installed</p>
</li>
<li>
<p>kubectl: Pre-installed</p>
</li>
<li>
<p>git: Pre-installed. Need to configure SSH keys for GitHub access</p>
</li>
<li>
<p>jq: Pre-installed</p>
</li>
<li>
<p>Helm: Needs to be installed</p>
</li>
<li>
<p>yq: Needs to be installed</p>
</li>
<li>
<p>eksctl: Needs to be installed if you plan to create an EKS cluster</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="cloud-shell-storage">Cloud Shell Storage</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Note</dt>
<dd>
<p>AWS Cloud Shell provides 1 GB of persistent storage for your files and configurations.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can install custom tools for temporary use in /usr/local/bin or for persistent use in $HOME/bin.</p>
</div>
<div class="paragraph">
<p>Here, you can see how big the installed tools are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> <span class="nt">--block-size</span><span class="o">=</span>M
total 203M
<span class="nt">-rwxr-xr-x</span><span class="nb">.</span> 1 cloudshell-user cloudshell-user 144M Nov 27 04:35 eksctl
<span class="nt">-rwxr-xr-x</span><span class="nb">.</span> 1 cloudshell-user cloudshell-user  49M Feb 21  2024 helm
<span class="nt">-rwxr-xr-x</span><span class="nb">.</span> 1 cloudshell-user cloudshell-user  11M Nov 24 23:59 yq</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to free up space, you can install tools in /usr/local/bin for temporary use.
This document shows how to install them in $HOME/bin for persistent use.</p>
</div>
<div class="sect3">
<h4 id="configure-github-ssh-access">Configure GitHub SSH Access</h4>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.ssh
<span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-C</span> <span class="s2">"your-github-email"</span> <span class="nt">-f</span> ~/.ssh/id_rsa</code></pre>
</div>
</div>
<div class="paragraph">
<p>Trust GitHub host key:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>ssh-keyscan github.com <span class="o">&gt;&gt;</span> ~/.ssh/known_hosts</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click on your GitHub profile &#8594; Settings &#8594; SSH and GPG keys &#8594; New SSH key. Paste the contents of the public key (~/.ssh/id_rsa.pub) there.</p>
</div>
</div>
<div class="sect3">
<h4 id="add-homebin-to-path">Add $HOME/bin to PATH</h4>
<div class="paragraph">
<p>To make custom-installed tools accessible from the command line, you should store them in a dedicated folder like ~/bin and ensure it’s part of your PATH.
CloudShell usually includes $HOME/bin in the PATH by default. But if for any reason it isn’t, follow these steps:
.Check if $HOME/bin is already in your PATH:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$PATH</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">If it’s not included, add it manually:</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'export PATH=$HOME/bin:$PATH'</span> <span class="o">&gt;&gt;</span> <span class="nv">$HOME</span>/.bashrc
<span class="nv">$ </span><span class="nb">source</span> <span class="nv">$HOME</span>/.bashrc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Then, create the directory (if it doesn’t already exist):</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/bin</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install-helm">Install Helm</h4>
<div class="paragraph">
<p>Run the following commands to download and install Helm in your persistent storage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>curl <span class="nt">-L</span> https://get.helm.sh/helm-v3.14.2-linux-amd64.tar.gz <span class="nt">-o</span> helm.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-zxvf</span> helm.tar.gz
<span class="nv">$ </span><span class="nb">mv </span>linux-amd64/helm ~/bin/
<span class="nv">$ </span><span class="nb">rm</span> <span class="nt">-rf</span> helm.tar.gz linux-amd64</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>helm version</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install-yq">Install yq</h4>
<div class="paragraph">
<p>Run the following commands to download and install yq in your persistent storage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>wget https://github.com/mikefarah/yq/releases/latest/download/yq_linux_amd64 <span class="nt">-O</span> ~/bin/yq
<span class="nv">$ </span><span class="nb">chmod</span> +x ~/bin/yq</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>yq <span class="nt">--version</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install-eksctl">Install eksctl</h4>
<div class="paragraph">
<p>This is optional, only if you plan to create an EKS cluster.</p>
</div>
<div class="paragraph">
<p>First, download the latest eksctl binary and move it to your persistent bin directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>curl <span class="nt">--silent</span> <span class="nt">--location</span> <span class="s2">"https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_</span><span class="si">$(</span><span class="nb">uname</span> <span class="nt">-s</span><span class="si">)</span><span class="s2">_amd64.tar.gz"</span> <span class="se">\</span>
  <span class="nt">-o</span> eksctl.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xzf</span> eksctl.tar.gz
<span class="nv">$ </span><span class="nb">mv </span>eksctl <span class="nv">$HOME</span>/bin/
<span class="nv">$ </span><span class="nb">rm</span> <span class="nt">-rf</span> eksctl.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>eksctl version</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-create-an-eks-cluster">2. Create an EKS Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you don’t have an existing EKS cluster, you can create one using eksctl. <strong>eksctl</strong> simplifies the process of creating and managing EKS clusters. Install eksctl as described in the previous section.</p>
</div>
<div class="paragraph">
<p>Service Foundry provides 'create-eks.sh' to streamline creating an EKS cluster with recommended settings.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Installing EBS CSI Driver for dynamic volume provisioning</p>
</li>
<li>
<p>Installing Autoscaler for automatic node scaling</p>
</li>
<li>
<p>Creating PriorityClasses for pod scheduling</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Download the cloud-tools repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>git clone https://github.com/nsalexamy/cloud-tools.git
<span class="nv">$ </span><span class="nb">cd </span>cloud-tools/aws/eks</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure the required environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">export </span><span class="nv">EKS_CLUSTER_NAME</span><span class="o">=</span><span class="s2">"your-cluster-name"</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">AWS_ACCOUNT_ID</span><span class="o">=</span><span class="si">$(</span>aws sts get-caller-identity <span class="nt">--query</span> Account <span class="nt">--output</span> text<span class="si">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The default settings in 'create-eks.sh' are optimized for Service Foundry. You can modify them as needed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>EKS_NODE_MIN</strong>: Minimum number of nodes in the node group (default: 2)</p>
</li>
<li>
<p><strong>EKS_NODE_MAX</strong>: Maximum number of nodes in the node group (default: 4)</p>
</li>
<li>
<p><strong>EKS_NODE_DESIRED</strong>: Desired number of nodes in the node group (default: 2)</p>
</li>
<li>
<p><strong>EKS_NODE_TYPE</strong>: EC2 instance type for the nodes (default: t3a.xlarge)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run the script to create the EKS cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>./create-eks.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>This process may take several minutes. Once completed, your EKS cluster will be ready for use with Service Foundry and No need to manually configure kubectl to connect to the cluster, as the script handles that automatically.</p>
</div>
<div class="paragraph">
<p>Verify the cluster is up and running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl get nodes</code></pre>
</div>
</div>
<div class="paragraph">
<p>To clean up and delete the EKS cluster when no longer needed, you can run the 'delete-eks.sh' script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>./delete-eks.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-configure-kubectl-to-connect-to-the-eks-cluster">3. Configure kubectl to Connect to the EKS Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have created the EKS cluster using the 'create-eks.sh' script, your kubectl should already be configured to connect to the cluster. So you can skip this step.</p>
</div>
<div class="paragraph">
<p>To connect your kubectl to the EKS cluster, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>aws eks update-kubeconfig <span class="nt">--region</span> <span class="nv">$AWS_REGION</span> <span class="nt">--name</span> <span class="nv">$EKS_CLUSTER_NAME</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify the connection by listing the nodes in the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl get nodes</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="4-create-a-github-repository-for-gitops">4. Create a GitHub Repository for GitOps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Service Foundry uses GitOps principles for managing configurations and deployments. You need to create a GitHub repository to store the configuration files.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to GitHub and create a new repository (public or private).</p>
</li>
<li>
<p>Initialize the repository with a README file as GitHub suggests.</p>
</li>
<li>
<p>Add Deploy Keys so that Service Foundry can push changes to this repository.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Create SSH Keys for GitHub Access</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/service-foundry/gitops-ssh
<span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-C</span> <span class="s2">"your-github-email"</span> <span class="nt">-f</span> ~/service-foundry/gitops-ssh/id_rsa

<span class="c"># Copy the public key to add as a Deploy Key in GitHub</span>
<span class="nv">$ </span><span class="nb">cat</span> ~/service-foundry/gitops-ssh/id_rsa.pub</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go to your GitHub repository &#8594; Settings &#8594; Deploy Keys &#8594; Add deploy key. Paste the public key you generated above. Make sure to check "Allow write access" so that Service Foundry can push changes to the repository.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/github-deploy-key.png" alt="github deploy key">
</div>
</div>
<div class="paragraph">
<p>The private key will be used later during the Service Foundry installation as an environment variable named <strong>GIT_OPS_REPO_SSH_KEY_PATH</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="5-download-bootstrap-scripts-and-install-service-foundry">5. Download Bootstrap Scripts and Install Service Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Follow these steps to download the bootstrap scripts and install Service Foundry on your EKS cluster.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the Community Edition license key.</p>
</li>
<li>
<p>Fill out the form to download the bootstrap scripts.</p>
</li>
<li>
<p>Upload the bootstrap script zip file to AWS Cloud Shell.</p>
</li>
<li>
<p>Unzip the downloaded file in AWS Cloud Shell.</p>
</li>
<li>
<p>Set Environment Variables</p>
</li>
<li>
<p>Run the Bootstrap Script to Install Service Foundry</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="create-a-community-edition-license-key">Create a Community Edition License Key</h3>
<div class="paragraph">
<p>Navigate to the Service Foundry Community website to get the latest bootstrap scripts. You can get the license key for Community Edition during this step.</p>
</div>
<div class="paragraph">
<p><a href="https://community.servicefoundry.org/" class="bare">https://community.servicefoundry.org/</a></p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/community-home.png" alt="community home">
</div>
<div class="title">Figure 1. Navigate to the Service Foundry Community Website</div>
</div>
<div class="paragraph">
<p>Click on "Community License" to create a new license key.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/community-license.png" alt="community license">
</div>
<div class="title">Figure 2. Community License Form</div>
</div>
<div class="paragraph">
<p>Fill out the fields below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Customer Name</strong>: Use Your Email Address or Your Organization Name</p>
</li>
<li>
<p><strong>Installation ID</strong>: Use your Kubenetes Cluster Name</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click on "<strong>Generate License</strong>" to create the license key.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/community-license-generate.png" alt="community license generate">
</div>
<div class="title">Figure 3. Generated License Key</div>
</div>
<div class="paragraph">
<p>Copy the generated license key, as you will need it for the bootstrap script generation.</p>
</div>
</div>
<div class="sect2">
<h3 id="fill-out-the-form-to-download-bootstrap-scripts">Fill out the Form to Download Bootstrap Scripts</h3>
<div class="paragraph">
<p>Click on "Bootstrap Scripts" to access the download form.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/community-bootstrap-scripts.png" alt="community bootstrap scripts">
</div>
<div class="title">Figure 4. Bootstrap Scripts Form</div>
</div>
<div class="sect3">
<h4 id="component-versions">Component Versions</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Service foundry App Version</strong>: Select the latest stable version.</p>
</li>
<li>
<p><strong>Service Foundry Builder Version</strong>: Select the latest stable version.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="cloud-provider">Cloud Provider</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Cloud Provider</strong>: Select "AWS". As of now, only AWS is supported.</p>
</li>
<li>
<p><strong>AWS Account ID</strong>: Enter your AWS Account ID where the EKS cluster is created.</p>
</li>
<li>
<p><strong>AWS Region</strong>: Enter the AWS region where the EKS cluster is located (e.g., us-west-2).</p>
</li>
<li>
<p><strong>Kubernetes Cluster Name</strong>: Enter the name of your EKS cluster.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="core-configuration">Core Configuration</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Service Foundry Namespace</strong>: Default is "service-foundry". You can change it if needed.</p>
</li>
<li>
<p><strong>GitOps Repository URL</strong>: Enter the SSH URL of the GitHub repository you created earlier.</p>
</li>
<li>
<p><strong>GitOps Repository Branch</strong>: Default is "main". Change it if your repository uses a different branch.</p>
</li>
<li>
<p><strong>GitOps User Email</strong>: Enter your email address that will be used for Git commits.</p>
</li>
<li>
<p><strong>Root Domain Name</strong>: Enter your domain name if you have one. If not, use arbitrary value for testing purposes (e.g., your-domain.com).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="load-balancer-configuration">Load Balancer Configuration</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Use TLS</strong>: Leave it unchecked for now.</p>
</li>
<li>
<p><strong>Use AWS ACM</strong>: Leave it unchecked for now.</p>
</li>
<li>
<p><strong>ACM Certificate ARN</strong>: Leave it blank for now.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="secrets">Secrets</h4>
<div class="ulist">
<ul>
<li>
<p><strong>POSTGRES_PASSWORD</strong>: Enter a strong password for the PostgreSQL database.</p>
</li>
<li>
<p><strong>REDIS_PASSWORD</strong>: Enter a strong password for the Redis instance.</p>
</li>
<li>
<p><strong>The devops User Password</strong>: Enter a strong password for the DevOps user. This user is used to access the Service Foundry Admin Console.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="license">License</h4>
<div class="ulist">
<ul>
<li>
<p><strong>License Payload</strong>: Paste the Community Edition license key you generated earlier.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="download-bootstrap-scripts">Download Bootstrap Scripts</h4>
<div class="paragraph">
<p>Click on "<strong>Generate Bootstrap Scripts</strong>" to download the zip file containing the bootstrap scripts.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="upload-the-bootstrap-script-zip-file-to-aws-cloud-shell">Upload the Bootstrap Script Zip File to AWS Cloud Shell</h3>
<div class="paragraph">
<p>On the AWS Cloud Shell interface, click on the "Actions" menu (three vertical dots) in the top-right corner and select "Upload file".</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="images/aws-cloudshell-upload-file.png" alt="aws cloudshell upload file">
</div>
<div class="title">Figure 5. Upload File in AWS Cloud Shell</div>
</div>
<div class="paragraph">
<p>Select the downloaded <strong>bootstrap-scripts.zip</strong> file from your local machine to upload it to AWS Cloud Shell.</p>
</div>
<div class="paragraph">
<p>Then you will see the uploaded file in your Cloud Shell home directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="unzip-the-downloaded-file-in-aws-cloud-shell">Unzip the Downloaded File in AWS Cloud Shell</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">mkdir</span> ~/service-foundry
<span class="nv">$ </span><span class="nb">mv </span>bootstrap-scripts.zip ~/service-foundry/
<span class="nv">$ </span><span class="nb">cd</span> ~/service-foundry
<span class="nv">$ </span>unzip bootstrap-scripts.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that <strong>bootstrap.sh</strong> is present:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="set-environment-variables">Set Environment Variables</h3>
<div class="paragraph">
<p>Before running the bootstrap script, you need to set several environment variables to configure the installation.</p>
</div>
<div class="paragraph">
<p>Mandatory Environment Variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>GIT_OPS_REPO_SSH_KEY_PATH</strong> - Path to the private SSH key for GitOps repository access.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use the private key you created earlier for GitHub access.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span><span class="nb">export </span><span class="nv">GIT_OPS_REPO_SSH_KEY_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/service-foundry/gitops-ssh/id_rsa"</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-the-bootstrap-script-to-install-service-foundry">Run the Bootstrap Script to Install Service Foundry</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>./bootstrap.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>The bootstrap script will install all required components with the settings you provided. This process may take some time, depending on your internet connection and AWS resources.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="6-dns-configuration-if-applicable">6. DNS Configuration (if applicable)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend using a public DNS name for accessing Service Foundry. If you do not have a domain name, you can use the hosts file for testing purposes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sfapp.your-domain.com</p>
</li>
<li>
<p>oauth2-proxy.your-domain.com</p>
</li>
<li>
<p>grafana.your-domain.com (if O11y is enabled)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use the IP address of the Traffic Load Balancer created during the installation.</p>
</div>
<div class="listingblock">
<div class="title">Get the IP Address of the Traffic Load Balancer</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl <span class="nt">-n</span> traefik get svc traefik

<span class="nv">$ </span>ping &lt;LOAD_BALANCER_DNS_NAME&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sample hosts file entry:</p>
</div>
<div class="paragraph">
<p>This should be added to your local machine&#8217;s hosts file (e.g., /etc/hosts on Linux/Mac or C:\Windows\System32\drivers\etc\hosts on Windows).</p>
</div>
<div class="listingblock">
<div class="title">/etc/hosts on Linux/Mac</div>
<div class="content">
<pre>12.34.12.34 sfapp.your-domain.com oauth2-proxy.your-domain.com grafana.your-domain.com</pre>
</div>
</div>
<div class="paragraph">
<p>'12.34.12.34' should be replaced with the actual IP address of the Traffic Load Balancer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="7-load-balancers">7. Load Balancers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Two load balancers will be created in your AWS account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Traffic Load Balancer (Always created).</p>
</li>
<li>
<p>Keycloak Load Balancer (Created if Public Domain is not available. <a href="https://keycloak.your-domain.com" class="bare">https://keycloak.your-domain.com</a> will be used when public Domain is available and TLS is enabled).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="8-access-service-foundry">8. Access Service Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the installation is complete and DNS is configured, you can access the Service Foundry Admin Console using the following URL:</p>
</div>
<div class="paragraph">
<p><a href="http://sfapp.your-domain.com" class="bare">http://sfapp.your-domain.com</a> or <a href="https://sfapp.your-domain.com" class="bare">https://sfapp.your-domain.com</a> (if TLS is enabled).</p>
</div>
<div class="paragraph">
<p>Use the <strong>devops</strong> user credentials you set during the bootstrap script execution to log in.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have successfully installed Service Foundry on your AWS EKS cluster using AWS Cloud Shell. You can now start using Service Foundry to manage your applications and services.</p>
</div>
</div>
</div>
        </div>
    </main>
</div>




<script>
    const toc = document.getElementById('toc');
    const container = document.getElementById('toc-container');
    if (toc && container) {
        container.appendChild(toc);
    }
</script>


<!--<button onclick="toggleTheme()" style="position: fixed; bottom: 1rem; right: 1rem; padding: 0.5rem 1rem; background-color: var(&#45;&#45;link); color: white; border: none; border-radius: 0.375rem; cursor: pointer;">-->
<!--    Toggle Theme-->
<!--</button>-->

<!--<script>-->
<!--    function toggleTheme() {-->
<!--        const html = document.documentElement;-->
<!--        const isDark = html.getAttribute("data-theme") === "dark";-->
<!--        html.setAttribute("data-theme", isDark ? "light" : "dark");-->
<!--        localStorage.setItem("theme", isDark ? "light" : "dark");-->
<!--    }-->

<!--    document.addEventListener("DOMContentLoaded", () => {-->
<!--        const savedTheme = localStorage.getItem("theme") || "light";-->
<!--        document.documentElement.setAttribute("data-theme", savedTheme);-->
<!--    });-->
<!--</script>-->

<!-- Footer -->
<footer class="bg-gray-900 text-white text-sm py-6 text-center">
    © 2025 Service Foundry. All rights reserved.
</footer>
</body>
</html>