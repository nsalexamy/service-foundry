<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Service Foundry - User Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            font-family: sans-serif;
            background-color: #f8fafc;
            color: #1f2937;
            margin: 0;
            padding: 0;
        }
    </style>
    
</head>
<body>
<div id="toc" class="toc">
<div id="toctitle">On this page</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#key-components">Key Components</a></li>
</ul>
</li>
<li><a href="#main-concepts">Main Concepts</a></li>
<li><a href="#why-service-foundry">Why Service Foundry?</a></li>
<li><a href="#bootstrapping-service-foundry">Bootstrapping Service Foundry</a>
<ul class="sectlevel2">
<li><a href="#service-foundry-console-access">Service Foundry Console Access</a></li>
<li><a href="#git-repository">Git Repository</a></li>
<li><a href="#sealedsecrets-applied-after-bootstrapping">SealedSecrets applied after Bootstrapping</a></li>
<li><a href="#argo-cd-applications-after-bootstrapping">Argo CD Applications after Bootstrapping</a></li>
</ul>
</li>
<li><a href="#service-foundry-console-features">Service Foundry Console Features</a></li>
<li><a href="#managed-applications">Managed Applications</a>
<ul class="sectlevel2">
<li><a href="#application-files">Application Files</a></li>
<li><a href="#details">Details</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
</li>
<li><a href="#enterprise-applications">Enterprise Applications</a>
<ul class="sectlevel2">
<li><a href="#create-enterprise-application">Create Enterprise Application</a></li>
</ul>
</li>
<li><a href="#open-source-software">Open Source Software</a>
<ul class="sectlevel2">
<li><a href="#gitops-repository-after-installing-open-source-software">GitOps Repository after Installing Open Source Software</a></li>
<li><a href="#open-source-software-view-application">Open Source Software - View Application</a></li>
<li><a href="#gitops-applications">GitOps Applications</a></li>
</ul>
</li>
<li><a href="#kubernetes-stack-orchestration">Kubernetes Stack Orchestration</a>
<ul class="sectlevel2">
<li><a href="#framework-core">Framework Core</a></li>
<li><a href="#shared-components">Shared Components</a></li>
<li><a href="#observability-stack">Observability Stack</a></li>
<li><a href="#single-sign-on-sso-stack">Single Sign-On (SSO) Stack</a></li>
<li><a href="#spring-backend-stack-wip">Spring Backend Stack (WIP)</a></li>
<li><a href="#big-data-stack-wip">Big Data Stack (WIP)</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock img-wide">
<div class="content">
<img src="./images/architecture-overview.png" alt="Architecture Overview">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">author</dt>
<dd>
<p>Young Gyu Kim</p>
</dd>
<dt class="hdlist1">email</dt>
<dd>
<p><a href="mailto:credemol@gmail.com">credemol@gmail.com</a></p>
<hr>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Service Foundry is a comprehensive platform designed to streamline the deployment, management, and scaling of applications in a Kubernetes-native environment. It integrates various tools and services to provide a seamless experience for developers and operations teams.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-driven-kubernetes-platform.png" alt="GitOps-Driven Kubernetes Platform">
</div>
</div>
<div class="paragraph">
<p>Service Foundry leverages GitOps principles, treating Git as the single source of truth for all Kubernetes manifests and configurations. This approach ensures that all changes are version-controlled, traceable, and auditable, enhancing collaboration and reliability.</p>
</div>
<div class="paragraph">
<p>Service Foundry is designed to handle complex application stacks, including observability and big data solutions. It supports the provisioning of both custom enterprise applications from private registries and open-source software from public registries.</p>
</div>
<div class="sect2">
<h3 id="key-components">Key Components</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Argo CD</strong>: The GitOps continuous delivery tool that will manage the deployment of applications.</p>
</li>
<li>
<p><strong>SealedSecrets</strong>: A tool for managing sensitive information securely in Kubernetes.</p>
</li>
<li>
<p><strong>Keycloak</strong>: An identity and access management solution for Single Sign-On (SSO).</p>
</li>
<li>
<p><strong>Traefik</strong>: A dynamic reverse proxy and load balancer for routing traffic to applications.</p>
</li>
<li>
<p><strong>OAuth2 Proxy for SSO</strong>: A reverse proxy that provides authentication using OAuth2.</p>
</li>
<li>
<p><strong>Traefik IngressRoute for SSO</strong>: IngressRoute configuration for routing SSO traffic.</p>
</li>
<li>
<p><strong>Service Foundry Console Backend</strong>: The API layer that integrates Git repositories and Argo CD.</p>
</li>
<li>
<p><strong>Service Foundry Console Frontend</strong>: The web interface for managing and monitoring applications.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="main-concepts">Main Concepts</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Single Source of Truth</dt>
<dd>
<p>All Kubernetes manifests and configurations are stored in a Git repository, ensuring version control and traceability.</p>
</dd>
<dt class="hdlist1">GitOps</dt>
<dd>
<p>A set of practices that uses Git repositories as the single source of truth for declarative infrastructure and applications.</p>
</dd>
<dt class="hdlist1">Argo CD</dt>
<dd>
<p>A declarative, GitOps continuous delivery tool for Kubernetes that automates the deployment of applications.</p>
</dd>
<dt class="hdlist1">Resource Generator</dt>
<dd>
<p>A CLI tool that generates Kubernetes manifests from templates, simplifying the creation of complex application stacks.</p>
</dd>
<dt class="hdlist1">Service Foundry Builder</dt>
<dd>
<p>A Kubernetes job that runs the Resource Generator and creates Argo CD applications based on the generated manifests. It has all tools and permissions to interact with the Git repository, Argo CD, and the Kubernetes cluster.</p>
</dd>
<dt class="hdlist1">Service Foundry Console</dt>
<dd>
<p>A web-based interface for managing and monitoring applications, providing visibility into the GitOps workflow.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why-service-foundry">Why Service Foundry?</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Readiness</strong>: Provides a ready-to-use platform for deploying and managing applications in Kubernetes.</p>
</li>
<li>
<p><strong>Simplified Application Management</strong>: Provides a unified platform to manage applications, reducing complexity and operational overhead.</p>
</li>
<li>
<p><strong>Collaboration</strong>: Enhances collaboration between developers and operations teams through a GitOps-based workflow.</p>
</li>
<li>
<p><strong>Automation</strong>: Automates the deployment and management of applications, ensuring consistency and reliability.</p>
</li>
<li>
<p><strong>Scalability</strong>: Designed to handle complex application stacks, including observability and big data solutions.</p>
</li>
<li>
<p><strong>Security</strong>: Integrates with tools like SealedSecrets to manage sensitive information securely.</p>
</li>
<li>
<p><strong>Observability</strong>: Built-in support for monitoring and logging tools like Prometheus, Grafana, Loki, and Tempo.</p>
</li>
<li>
<p><strong>Custom and Open-Source Applications</strong>: Supports provisioning of both custom enterprise applications from private registries and open-source software from public registries.</p>
</li>
<li>
<p><strong>Single Sign-On (SSO)</strong>: Integrates with OAuth2 providers for seamless authentication and access control.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrapping-service-foundry">Bootstrapping Service Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All components of Service Foundry are also deployed and managed using GitOps principles. The entire platform can be bootstrapped using a single command, which sets up the necessary infrastructure, tools, and configurations.</p>
</div>
<div class="paragraph">
<p>To bootstrap the Service Foundry environment, run the following Helm command. This command installs the Service Foundry Builder in the <code>service-foundry</code> namespace, which will then generate the required Kubernetes manifests and create Argo CD applications to deploy the platform.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>helm <span class="nb">install </span>service-foundry-builder <span class="se">\</span>
<span class="go">  service-foundry/service-foundry-builder \
  --set command=bootstrap \
  -n service-foundry --create-namespace \
</span><span class="gp">  --version $</span>SF_BUILDER_CHART_VERSION</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before running the command, ensure you have set the following environment variables. These variables provide the necessary configuration for the bootstrapping process.</p>
</div>
<div class="paragraph">
<p>Here is an example of setting the environment variables for GitOps repository access and configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">GIT_OPS_REPO_URL=$</span><span class="o">{</span>GIT_OPS_REPO_URL:-<span class="s2">"git@github.com:nsalexamy/service-foundry-argocd.git"</span><span class="o">}</span>
<span class="gp">GIT_OPS_REPO_NAME=$</span><span class="o">{</span>GIT_OPS_REPO_NAME:-<span class="s2">"service-foundry-argocd"</span><span class="o">}</span>
<span class="gp">GIT_OPS_REPO_SSH_KEY_PATH=$</span><span class="o">{</span>GIT_OPS_REPO_SSH_KEY_PATH:-<span class="s2">"./ssh/argocd-ssh/argocd_id_rsa"</span><span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The Service Foundry Builder job will start running and perform the bootstrapping process. You can monitor the progress of the job using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="gp">$</span><span class="w"> </span>kubectl <span class="nt">-n</span> service-foundry get job
<span class="go">NAME                      STATUS    COMPLETIONS   DURATION   AGE
service-foundry-builder   Running   0/1           11s        11s</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the job is complete, it will have set up all the necessary components of the Service Foundry platform, including Argo CD, Keycloak, Traefik, SealedSecrets, and the Service Foundry Console.</p>
</div>
<div class="sect2">
<h3 id="service-foundry-console-access">Service Foundry Console Access</h3>
<div class="paragraph">
<p>By default, the Service Foundry Console is accessible via the following URL: sfapp.{your-root-domain}. Ensure that your DNS is configured to point to the Traefik load balancer.</p>
</div>
<div class="paragraph">
<p>After the bootstrapping process is complete, you can access the Service Foundry Console to manage and monitor your applications.</p>
</div>
<div class="imageblock img-medium">
<div class="content">
<img src="./images/bootstrap-service-foundry-console-login.png" alt="Service Foundry Console Login">
</div>
</div>
<div class="paragraph">
<p>In Keycloak, there are predefined users created for accessing the Service Foundry Console. The default users are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>devops (role: admin)</p>
</li>
<li>
<p>nick (role: admin)</p>
</li>
<li>
<p>sarah (role: user)</p>
</li>
</ul>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-service-foundry-console.png" alt="Service Foundry Console Access">
</div>
</div>
<div class="paragraph">
<p>In the 'Managed Applications' section, you can view all Argo CD applications deployed in the cluster, created during the bootstrapping process.</p>
</div>
</div>
<div class="sect2">
<h3 id="git-repository">Git Repository</h3>
<div class="paragraph">
<p>All components and configurations of the Service Foundry platform are stored in the GitOps repository. The structure of the repository after bootstrapping is as follows:</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-git-repository.png" alt="bootstrap git repository">
</div>
</div>
<div class="paragraph">
<p>Users can manage GitOps files via the Service Foundry Console or directly through Git operations (clone, commit, push, pull) using Git clients.</p>
</div>
</div>
<div class="sect2">
<h3 id="sealedsecrets-applied-after-bootstrapping">SealedSecrets applied after Bootstrapping</h3>
<div class="paragraph">
<p>All sensitive information, such as passwords and API keys, are stored securely using SealedSecrets. After the bootstrapping process, you can view the SealedSecrets in the <code>service-foundry</code> namespace.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-git-sealedsecrets.png" alt="SealedSecrets after Bootstrapping">
</div>
</div>
<div class="paragraph">
<p>admin-password is encrypted and stored as a SealedSecret in the GitOps repository. It is used for the initial admin login to the Service Foundry Console.</p>
</div>
</div>
<div class="sect2">
<h3 id="argo-cd-applications-after-bootstrapping">Argo CD Applications after Bootstrapping</h3>
<div class="paragraph">
<p>All components of the Service Foundry platform are deployed and managed using Argo CD. After the bootstrapping process, you can view the Argo CD applications in the Argo CD UI.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-argocd-applications.png" alt="Argo CD Applications after Bootstrapping">
</div>
</div>
<div class="paragraph">
<p>The GitOps Repository is configured in Argo CD Settings as a repository, allowing Argo CD to sync the applications defined in the repository to the Kubernetes cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-argocd-repositories.png" alt="Argo CD Repositories after Bootstrapping">
</div>
</div>
<div class="paragraph">
<p>By default, 'service-foundry' project is created in Argo CD to manage all applications related to the Service Foundry platform.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/bootstrap-argocd-projects.png" alt="][Argo CD Projects after Bootstrapping">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-foundry-console-features">Service Foundry Console Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Service Foundry Console provides a user-friendly interface for managing and monitoring applications deployed in the Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Main features of the console include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">GitOps</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Managed Applications</strong>: View and manage all Argo CD applications deployed in the cluster.</p>
</li>
<li>
<p><strong>Enterprise Applications</strong>: Install and manage custom enterprise applications from private registries.</p>
</li>
<li>
<p><strong>Open Source Software</strong>: Install and manage open-source software applications using Helm and GitOps.</p>
</li>
<li>
<p><strong>GitOps Applications</strong>: View, edit, and delete raw GitOps applications directly.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Kubernetes Stack Orchestration</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Framework Core</strong>: View and manage essential services installed during the initial setup.</p>
</li>
<li>
<p><strong>Shared Components</strong>: View and manage cluster-wide services used across multiple stacks.</p>
</li>
<li>
<p><strong>Observability Stack</strong>: Deploy and manage observability tools like Prometheus, Grafana, Loki, and Tempo.</p>
</li>
<li>
<p><strong>Single Sign-On (SSO)</strong>: Manage SSO configurations and user access.</p>
</li>
<li>
<p><strong>Big Data Stack</strong>: Deploy and manage big data solutions like Apache Spark, Airflow, OpenSearch, and Neo4j.</p>
</li>
<li>
<p><strong>Spring Backend Stack</strong>: Deploy and manage Spring Boot applications and related services.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Settings</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Configuration</strong>: Manage global settings for the Service Foundry Console.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managed-applications">Managed Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>View and manage all Argo CD applications deployed in the cluster. Users can uninstall applications directly from the console. If needed, users can update manifest files on the console so that Argo CD can sync the changes to the cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps.png" alt="Managed Applications">
</div>
</div>
<div class="paragraph">
<p>From the 'Managed Applications' section, users can view the status of all applications, including their health and sync status. Users can also uninstall applications directly from the console.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">enterprise apps icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle button to filter and view only Enterprise Applications.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">opensource software icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toggle button to filter and view only Open Source Software applications.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">uninstall icon</span></span> Uninstall</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Button to uninstall the selected application from the cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">uninstall icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Button to uninstall the application of the row.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To view more details about an application, click on the application name. This will open the application details page, where users can see more information about the application, including its manifests, sync status, and health.</p>
</div>
<div class="sect2">
<h3 id="application-files">Application Files</h3>
<div class="paragraph">
<p>Users can view and edit the manifest files of the application directly on the console. After making changes, users can commit and push the changes to the Git repository.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-view-1.png" alt="Application Details">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">collapse icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collapse the file tree view.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">expand icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expand the file tree view.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">refresh icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh the file tree view to see the latest state of the manifest files.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">edit icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start editing the manifest files of the application directly on the console. After making changes, users can commit and push the changes to the Git repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">undo icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard changes made to the manifest files and revert to the last synced state.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">save icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Save changes made to the manifest files. This will stage the changes for commit.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">discard icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discard all unsaved changes made to the manifest files.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">publish icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit and push the changes to the Git repository. This will trigger Argo CD to sync the changes to the cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">comment icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a commit message when pushing changes to the Git repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">text decrease icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decrease the font size of the manifest files for better readability.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">text increase icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Increase the font size of the manifest files for better readability.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="details">Details</h3>
<div class="paragraph">
<p>The Details tab provides an overview of the application, including its name, namespace, project, sync status, health status, and other relevant information.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-view-2.png" alt="Application Details - Properties">
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources">Resources</h3>
<div class="paragraph">
<p>The Resources tab displays the Kubernetes resources associated with the application. Users can view the status of each resource and navigate to the resource details.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-view-3.png" alt="Application Details - Resources">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enterprise-applications">Enterprise Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Install and manage custom enterprise applications from private registries. Users can create Kustomize or Helm applications using predefined templates.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-enterprise-apps.png" alt="Enterprise Applications">
</div>
</div>
<div class="paragraph">
<p>Click 'Add New Application' to create a new enterprise application. Users can choose between Kustomize and Helm application types.</p>
</div>
<div class="sect2">
<h3 id="create-enterprise-application">Create Enterprise Application</h3>
<div class="paragraph">
<p>An enterprise application can be created using either Kustomize or Helm. Users need to provide the following information:</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-enterprise-apps-create-1.png" alt="Create Enterprise Application">
</div>
</div>
<div class="sect3">
<h4 id="common-fields">Common Fields</h4>
<div class="paragraph">
<p>Common fields are used to generate manifest files and Argo CD application files for both Kustomize and Helm applications.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 66.6666%;">
<col style="width: 16.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique code representing your project. This code will be used as a prefix for all resources related to this application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prj1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique name for the application. This name will be used as a suffix for all resources related to this application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myapp</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes namespace where the application will be deployed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prj1-namespace</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helm chart version or application version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Registry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The container image registry where the application&#8217;s Docker images are stored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ghcr.io</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Repository</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The container image repository name for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">o11y-otel-spring-example</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The tag of the container image to be used for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replica Count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of replicas to be deployed for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Container Port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port on which the application container will listen.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8080</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of Kubernetes service to expose the application. Options include ClusterIP, NodePort, and LoadBalancer.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ClusterIP</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="kustomize-application-fields">Kustomize Application Fields</h4>
<div class="paragraph">
<p>Manifest files and Argo CD application files will be generated using Kustomize templates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add Resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add additional Kubernetes resources to the Kustomize application, such as Deployment, Service, ConfigMaps, Secrets, or Ingress resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove the selected resource from the Kustomize application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rename the selected resource in the Kustomize application.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-enterprise-apps-create-2.png" alt="Create Enterprise Application - Kustomize">
</div>
</div>
<div class="paragraph">
<p>Service Foundry generates manifest files based on the provided information and selected resources. Users can view and edit the generated files before creating the application.</p>
</div>
<div class="paragraph img-wide">
<p>Click 'Create Application' to create the Kustomize application. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-enterprise-app-create.png" alt="GitOps Repository - Enterprise Application Created">
</div>
</div>
<div class="paragraph">
<p>The newly created Kustomize application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-enterprise-apps-2.png" alt="Enterprise Application Created">
</div>
</div>
<div class="paragraph">
<p>Click on the application name to view its details, including the generated manifest files and associated resources.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-enterprise-apps-view.png" alt="Enterprise Application Details">
</div>
</div>
<div class="paragraph">
<p>Manifest files can be edited directly on the console, and changes can be committed and pushed to the Git repository.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="open-source-software">Open Source Software</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Open Source Software applications can be installed and managed using Helm charts from public registries. Users can choose from a list of popular open-source tools and deploy them with a few clicks.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-oss-apps.png" alt="Open Source Software Applications">
</div>
</div>
<div class="paragraph">
<p>Select an application from the list and click 'Install' to deploy it.</p>
</div>
<div class="paragraph">
<p>Here is an example of installing the PostgreSQL using Helm.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-oss-apps-install.png" alt="Install Open Source Software Application">
</div>
</div>
<div class="paragraph">
<p>Each application has its own set of configurable parameters. Users can customize the deployment by modifying these parameters before installation. For example, when installing PostgreSQL, users can set the PostgreSQL username, password, and database name.</p>
</div>
<div class="paragraph">
<p>Click 'Install Application' to deploy the application. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="paragraph">
<p>While the installation is in progress, users can see the current Job status on the header section.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/job-status-in-progress.png" alt="Job Status - In Progress">
</div>
</div>
<div class="sect2">
<h3 id="gitops-repository-after-installing-open-source-software">GitOps Repository after Installing Open Source Software</h3>
<div class="paragraph">
<p>After the installation is complete, the newly created application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-oss-apps-create.png" alt="GitOps Repository - Open Source Software Application Created">
</div>
</div>
</div>
<div class="sect2">
<h3 id="open-source-software-view-application">Open Source Software - View Application</h3>
<div class="paragraph">
<p>Click on the application name to view its details, including the generated manifest files and associated resources.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-oss-learnmore.png" alt="Open Source Software Application Details">
</div>
</div>
<div class="paragraph">
<p>Open Source Software applications can be installed in multiple namespaces. Each installation will create a separate Argo CD application with its own set of resources.</p>
</div>
<div class="paragraph">
<p>Buttons to manage the application:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Helm App</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the Helm application details, including the generated manifest files and associated resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kustomize App</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the Kustomize application details, including the generated manifest files and associated resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNINSTALL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uninstall the Open Source Software application from the cluster. This will remove all associated resources and delete the Argo CD application. But, manifest files will remain in the Git repository.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="gitops-applications">GitOps Applications</h3>
<div class="paragraph">
<p>View, edit, and delete raw GitOps applications directly. This section supports full lifecycle operations for any manifests stored in the Git repository.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-gitops-apps.png" alt="GitOps Applications">
</div>
</div>
<div class="paragraph">
<p>Users can reuse existing manifest files stored in the Git repository to create new applications. Click 'Add New Application' to create a new GitOps application.</p>
</div>
<div class="paragraph">
<p><strong>Action icons on the list</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">copy files icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy the ArgoCD application file path to clipboard.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">edit files icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Edit the ArgoCD application file directly on the console.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">install icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install the selected application to the cluster. Enabled only if the application is not yet installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">uninstall icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uninstall the selected application from the cluster. Enabled only if the application is already installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="imageblock">
<div class="content">
<span class="alt">discard icon</span>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the selected application from the Git repository. This action cannot be undone.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Buttons on the header section</strong>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">discard icon</span></span> DELETE APPS</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the selected applications from the Git repository. This action cannot be undone.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">install icon</span></span> INSTALL APPS</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Install the selected applications to the cluster. Enabled only if the applications are not yet installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">uninstall icon</span></span> UNINSTALL APPS</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uninstall the selected applications from the cluster. Enabled only if the applications are already installed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on the application name to view its details, including the manifest files and associated resources.</p>
</div>
<div class="sect3">
<h4 id="gitops-applications-view-application">GitOps Applications - View Application</h4>
<div class="paragraph">
<p>Users can view and edit the manifest files of the application directly on the console. After making changes, users can commit and push the changes to the Git repository.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-gitops-apps-view.png" alt="GitOps Application Details">
</div>
</div>
<div class="paragraph">
<p>Buttons in the header section:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Button</th>
<th class="tableblock halign-left valign-top">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">file icon</span></span> View App Files</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View the manifest files of the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">install icon</span></span> Create ArgoCD App</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create an Argo CD application to deploy the resources to the cluster. Enabled only if the application is not yet installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">uninstall icon</span></span> Uninstall ArgoCD App</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uninstall the application from the cluster. This will remove all associated resources and delete the Argo CD application. Enabled only if the application is already installed.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div class="content"><div class="paragraph">
<p><span class="image"><span class="alt">discard icon</span></span> DELETE APP</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the application from the Git repository. This action cannot be undone.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kubernetes-stack-orchestration">Kubernetes Stack Orchestration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For complex workloads, the platform offers predefined orchestration profiles that bundle related components into stacks for easier deployment.</p>
</div>
<div class="paragraph">
<p>Kubernetes stacks can be deployed as layers, allowing users to build upon existing stacks. For example, the Observability Stack can be deployed on top of the Framework Core and Shared Components stacks.</p>
</div>
<div class="paragraph">
<p>Stacks can be deployed in any order, and users can choose to deploy only the stacks they need.</p>
</div>
<div class="sect2">
<h3 id="framework-core">Framework Core</h3>
<div class="paragraph">
<p>Framework Core includes essential services that are installed during the initial setup of Service Foundry. These services provide the foundational components required for the platform to function effectively.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-framework-core.png" alt="Framework Core">
</div>
</div>
<div class="paragraph">
<p>Users can view the configuration details of each component in the Framework Core stack and update settings if necessary. However, it is not recommended to uninstall any components from this stack, as they are critical for the platform&#8217;s operation.</p>
</div>
</div>
<div class="sect2">
<h3 id="shared-components">Shared Components</h3>
<div class="paragraph">
<p>Shared Components include cluster-wide services that are used across multiple stacks. These components provide common functionalities that can be leveraged by various applications and services deployed in the cluster. Kubernetes Operators like prometheus-operator, opentelemetry-operator, and spark-operator are included in this stack.</p>
</div>
<div class="paragraph">
<p>None of the components in this stack are mandatory, and users can choose to install and uninstall any components they need or do not need.</p>
</div>
<div class="paragraph">
<p>For example, if you plan to deploy the Observability Stack, you need to install the prometheus-operator and opentelemetry-operator from this stack first.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-shared-components.png" alt="Shared Components">
</div>
</div>
<div class="paragraph">
<p>Click 'Orchestrate' to deploy the Shared Components stack. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-shared-components-deploy.png" alt="Deploy Shared Components">
</div>
</div>
<div class="paragraph">
<p>Service Foundry will generate the manifest files based on the selected components and deploy them to the cluster. Users can modify the configuration of each component before deployment.</p>
</div>
<div class="paragraph">
<p>Applicable Domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Observability</strong>: Cert-manager, Prometheus-operator, Opentelemetry-operator</p>
</li>
<li>
<p><strong>Big Data</strong>: Cert-manager, Spark-operator</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Click 'Deploy' to deploy the selected components. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="paragraph">
<p>In the GitOps repository, a new directory named <code>infra-apps</code> will be created under the project code directory. This directory contains the manifest files for all selected components in the Shared Components stack.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-shared-components.png" alt="GitOps Repository - Shared Components Deployed">
</div>
</div>
<div class="paragraph">
<p>And the newly created Shared Components application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-shared-components.png" alt="Managed Applications - Shared Components">
</div>
</div>
</div>
<div class="sect2">
<h3 id="observability-stack">Observability Stack</h3>
<div class="paragraph">
<p>The Observability Stack supports monitoring, logging, and tracing via a comprehensive set of tools. Users can choose from different profiles based on their needs, such as Dev, Staging, or Production.</p>
</div>
<div class="paragraph">
<p>Components have dependencies on each other, so the order of installation matters. For example, if you plan to install Otel Collector, you might need to install Tempo, Prometheus and Loki together.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-observability-stack.png" alt="Observability Stack">
</div>
</div>
<div class="paragraph">
<p>Click 'Orchestrate' to deploy the Observability Stack. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-observability-stack-deploy.png" alt="Deploy Observability Stack">
</div>
</div>
<div class="paragraph">
<p>There are three profiles available for the Observability Stack:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Dev Profile</dt>
<dd>
<p>A lightweight setup for development and testing purposes. It includes essential components like Prometheus, Grafana, Loki, and Otel Collector.</p>
</dd>
<dt class="hdlist1">Staging Profile</dt>
<dd>
<p>A more robust setup suitable for staging environments. It includes additional components like OpenSearch and S3 storage for better data management.</p>
</dd>
<dt class="hdlist1">Production Profile</dt>
<dd>
<p>A full-scale observability stack designed for production environments. It includes all components, such as Jaeger, Cassandra, and advanced configurations for scalability and reliability.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Click 'Deploy' to deploy the selected profile. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="paragraph">
<p>In the GitOps repository, a new directory named <code>observability-apps</code> will be created under the project code directory. This directory contains the manifest files for all components in the Observability Stack.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-observability-stack.png" alt="GitOps Repository - Observability Stack Deployed">
</div>
</div>
<div class="paragraph">
<p>And the newly created Observability Stack application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-observability-stack.png" alt="Managed Applications - Observability Stack">
</div>
</div>
</div>
<div class="sect2">
<h3 id="single-sign-on-sso-stack">Single Sign-On (SSO) Stack</h3>
<div class="paragraph">
<p>The Single Sign-On (SSO) Stack provides authentication and access management for the Service Foundry platform. It integrates with Keycloak to offer a seamless SSO experience for users.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-sso-stack.png" alt="Single Sign-On (SSO) Stack">
</div>
</div>
<div class="paragraph">
<p>Oauth2 Proxy and Traefik IngressRoute with its middlewares are included in this stack to facilitate secure access to the Service Foundry Console and other applications.</p>
</div>
<div class="paragraph">
<p>This stack enables Kubernetes services to be accessed securely using SSO, enhancing the overall security posture of the platform.</p>
</div>
<div class="sect3">
<h4 id="single-sign-on-sso-deployment">Single Sign-On (SSO) Deployment</h4>
<div class="paragraph">
<p>Click 'Orchestrate' to deploy the SSO Stack. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-sso-stack-deploy.png" alt="Deploy Single Sign-On Stack">
</div>
</div>
<div class="sect4">
<h5 id="sso-configuration">SSO Configuration</h5>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-sso-stack-deploy-service.png" alt="SSO Configuration">
</div>
</div>
<div class="paragraph">
<p>Oauth2 Proxy Ingress Form</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique name for the Oauth2 Proxy Ingress resource. This name will be used as a suffix for all resources related to this ingress.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">o11y-sso-ingress</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes namespace where the Oauth2 Proxy Ingress will be deployed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">o11y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Kubernetes service that the Oauth2 Proxy Ingress will route traffic to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grafana</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port name of the service that the Oauth2 Proxy Ingress will route traffic to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subdomain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain name that will be used to access the service via the Oauth2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">grafana</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Subdomain will be used to create the full URL for accessing the service. The format will be <code>{subdomain}.{your-root-domain}</code>. Ensure that your DNS is configured to point to the Traefik load balancer.</p>
</div>
<div class="paragraph">
<p>If the root domain is 'nsa2.com', and the subdomain is 'grafana', the full URL to access Grafana will be <code>grafana.nsa2.com</code>.</p>
</div>
<div class="paragraph">
<p>Click 'Deploy' to deploy the SSO Stack. This will generate the necessary manifest files, commit them to the Git repository, and create an Argo CD application to deploy the resources to the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>kubectl <span class="nt">-n</span> o11y get ingressroutes o11y-sso-ingress-route <span class="nt">-o</span> yaml | yq <span class="s1">'.spec'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of the generated IngressRoute manifest for Grafana:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="na">entryPoints</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">web</span>
<span class="na">routes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">Rule</span>
    <span class="na">match</span><span class="pi">:</span> <span class="s">Host(`grafana.nsa2.com`)</span>
    <span class="na">middlewares</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">cors-headers</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">forward-auth</span>
    <span class="na">services</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">grafana</span>
        <span class="na">port</span><span class="pi">:</span> <span class="s">service</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gitops-repository-after-installing-sso-stack">GitOps Repository after Installing SSO Stack</h4>
<div class="paragraph">
<p>After the installation is complete, the newly created SSO Stack application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/gitops-sso-stack.png" alt="GitOps Repository - SSO Stack Deployed">
</div>
</div>
<div class="paragraph">
<p>And the newly created SSO Stack application will appear in the 'Managed Applications' section of the Service Foundry Console.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/console-managed-apps-sso.png" alt="Managed Applications - SSO Stack">
</div>
</div>
</div>
<div class="sect3">
<h4 id="resource-servers">Resource Servers</h4>
<div class="paragraph">
<p>Resource Servers are applications that are protected by the SSO Stack. Users can view and manage all Resource Servers in this section.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-sso-resource-servers.png" alt="SSO Resource Servers">
</div>
</div>
<div class="paragraph">
<p>With the same username and password can be used to access the Resource Servers.</p>
</div>
<div class="imageblock img-wide">
<div class="content">
<img src="./images/sf-sso-grafana.png" alt="Accessing Grafana with SSO">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-backend-stack-wip">Spring Backend Stack (WIP)</h3>
<div class="paragraph">
<p>The Spring Backend Stack provides a comprehensive environment for deploying and managing Spring Boot applications and related services. This stack includes essential components such as PostgreSQL, Redis, RabbitMQ, and more.</p>
</div>
</div>
<div class="sect2">
<h3 id="big-data-stack-wip">Big Data Stack (WIP)</h3>
<div class="paragraph">
<p>The Big Data Stack offers a robust environment for deploying and managing big data solutions. This stack includes components such as Apache Spark, Airflow, OpenSearch, Neo4j, MinIO, and Dbt.</p>
</div>
</div>
</div>
</div>
</body>
</html>